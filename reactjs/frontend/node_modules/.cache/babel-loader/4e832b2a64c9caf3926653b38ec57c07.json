{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.defaultProps = undefined;\n\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _filters = require('./filters');\n\nvar _index = require('./internal/index');\n\nvar _index2 = require('./accessibility/index');\n\nvar _utils = require('./utils');\n\nvar _builtins = require('./builtins');\n\nvar _index3 = require('./components/index');\n\nvar _primitives = require('./primitives');\n\nvar _styles = require('./styles');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar defaultProps = exports.defaultProps = {\n  backspaceRemovesValue: true,\n  blurInputOnSelect: (0, _utils.isTouchCapable)(),\n  captureMenuScroll: !(0, _utils.isTouchCapable)(),\n  closeMenuOnSelect: true,\n  components: {},\n  controlShouldRenderValue: true,\n  escapeClearsValue: false,\n  filterOption: (0, _filters.createFilter)(),\n  formatGroupLabel: _builtins.formatGroupLabel,\n  getOptionLabel: _builtins.getOptionLabel,\n  getOptionValue: _builtins.getOptionValue,\n  isDisabled: false,\n  isLoading: false,\n  isMulti: false,\n  isRtl: false,\n  isSearchable: true,\n  isOptionDisabled: _builtins.isOptionDisabled,\n  loadingMessage: function loadingMessage() {\n    return 'Loading...';\n  },\n  maxMenuHeight: 300,\n  minMenuHeight: 140,\n  menuIsOpen: false,\n  menuPlacement: 'bottom',\n  menuPosition: 'absolute',\n  menuShouldBlockScroll: false,\n  menuShouldScrollIntoView: !(0, _utils.isMobileDevice)(),\n  noOptionsMessage: function noOptionsMessage() {\n    return 'No options';\n  },\n  openMenuOnFocus: false,\n  openMenuOnClick: true,\n  options: [],\n  pageSize: 5,\n  placeholder: 'Select...',\n  screenReaderStatus: function screenReaderStatus(_ref) {\n    var count = _ref.count;\n    return count + ' result' + (count !== 1 ? 's' : '') + ' available';\n  },\n  styles: {},\n  tabIndex: '0',\n  tabSelectsValue: true\n};\nvar instanceId = 1;\n\nvar Select = function (_Component) {\n  _inherits(Select, _Component); // Lifecycle\n  // ------------------------------\n  // Refs\n  // ------------------------------\n  // Misc. Instance Properties\n  // ------------------------------\n\n\n  function Select(props) {\n    _classCallCheck(this, Select);\n\n    var _this = _possibleConstructorReturn(this, (Select.__proto__ || Object.getPrototypeOf(Select)).call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var value = props.value;\n    _this.components = (0, _index3.defaultComponents)(props);\n    _this.instancePrefix = 'react-select-' + (_this.props.instanceId || ++instanceId);\n    var selectValue = (0, _utils.cleanValue)(value);\n\n    var menuOptions = _this.buildMenuOptions(props, selectValue);\n\n    _this.state.menuOptions = menuOptions;\n    _this.state.selectValue = selectValue;\n    return _this;\n  } // TODO\n\n\n  _createClass(Select, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.startListeningToTouch();\n\n      if (this.props.autoFocus) {\n        this.focusInput();\n      }\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var _props = this.props,\n          components = _props.components,\n          options = _props.options,\n          value = _props.value,\n          inputValue = _props.inputValue; // re-cache custom components\n\n      if (nextProps.components !== components) {\n        this.components = (0, _index3.defaultComponents)(nextProps);\n      } // rebuild the menu options\n\n\n      if (nextProps.value !== value || nextProps.options !== options || nextProps.inputValue !== inputValue) {\n        var _selectValue = (0, _utils.cleanValue)(nextProps.value);\n\n        var _menuOptions = this.buildMenuOptions(nextProps, _selectValue);\n\n        var _focusedValue = this.getNextFocusedValue(_selectValue);\n\n        var _focusedOption = this.getNextFocusedOption(_menuOptions.focusable);\n\n        this.setState({\n          menuOptions: _menuOptions,\n          selectValue: _selectValue,\n          focusedOption: _focusedOption,\n          focusedValue: _focusedValue\n        });\n      } // some updates should toggle the state of the input visibility\n\n\n      if (this.inputIsHiddenAfterUpdate != null) {\n        this.setState({\n          inputIsHidden: this.inputIsHiddenAfterUpdate\n        });\n        delete this.inputIsHiddenAfterUpdate;\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      var _props2 = this.props,\n          isDisabled = _props2.isDisabled,\n          menuIsOpen = _props2.menuIsOpen;\n      var isFocused = this.state.isFocused;\n\n      if ( // ensure focus is restored correctly when the control becomes enabled\n      isFocused && !isDisabled && prevProps.isDisabled || // ensure focus is on the Input when the menu opens\n      isFocused && menuIsOpen && !prevProps.menuIsOpen) {\n        this.focusInput();\n      } // scroll the focused option into view if necessary\n\n\n      if (this.menuListRef && this.focusedOptionRef && this.scrollToFocusedOptionOnUpdate) {\n        (0, _utils.scrollIntoView)(this.menuListRef, this.focusedOptionRef);\n      }\n\n      this.scrollToFocusedOptionOnUpdate = false;\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.stopListeningToTouch();\n    } // ==============================\n    // Consumer Handlers\n    // ==============================\n\n  }, {\n    key: 'onMenuOpen',\n    value: function onMenuOpen() {\n      this.props.onMenuOpen();\n    }\n  }, {\n    key: 'onMenuClose',\n    value: function onMenuClose() {\n      var _props3 = this.props,\n          isSearchable = _props3.isSearchable,\n          isMulti = _props3.isMulti;\n      this.announceAriaLiveContext({\n        event: 'input',\n        context: {\n          isSearchable: isSearchable,\n          isMulti: isMulti\n        }\n      });\n      this.onInputChange('', {\n        action: 'menu-close'\n      });\n      this.props.onMenuClose();\n    }\n  }, {\n    key: 'onInputChange',\n    value: function onInputChange(newValue, actionMeta) {\n      this.props.onInputChange(newValue, actionMeta);\n    } // ==============================\n    // Methods\n    // ==============================\n\n  }, {\n    key: 'focusInput',\n    value: function focusInput() {\n      if (!this.inputRef) return;\n      this.inputRef.focus();\n    }\n  }, {\n    key: 'blurInput',\n    value: function blurInput() {\n      if (!this.inputRef) return;\n      this.inputRef.blur();\n    } // aliased for consumers\n\n  }, {\n    key: 'openMenu',\n    value: function openMenu(focusOption) {\n      var _state = this.state,\n          menuOptions = _state.menuOptions,\n          selectValue = _state.selectValue;\n      var isMulti = this.props.isMulti;\n      var openAtIndex = focusOption === 'first' ? 0 : menuOptions.focusable.length - 1;\n\n      if (!isMulti) {\n        var selectedIndex = menuOptions.focusable.indexOf(selectValue[0]);\n\n        if (selectedIndex > -1) {\n          openAtIndex = selectedIndex;\n        }\n      }\n\n      this.scrollToFocusedOptionOnUpdate = true;\n      this.inputIsHiddenAfterUpdate = false;\n      this.onMenuOpen();\n      this.setState({\n        focusedValue: null,\n        focusedOption: menuOptions.focusable[openAtIndex]\n      });\n      this.announceAriaLiveContext({\n        event: 'menu'\n      });\n    }\n  }, {\n    key: 'focusValue',\n    value: function focusValue(direction) {\n      var _props4 = this.props,\n          isMulti = _props4.isMulti,\n          isSearchable = _props4.isSearchable;\n      var _state2 = this.state,\n          selectValue = _state2.selectValue,\n          focusedValue = _state2.focusedValue; // Only multiselects support value focusing\n\n      if (!isMulti) return;\n      this.setState({\n        focusedOption: null\n      });\n      var focusedIndex = selectValue.indexOf(focusedValue);\n\n      if (!focusedValue) {\n        focusedIndex = -1;\n        this.announceAriaLiveContext({\n          event: 'value'\n        });\n      }\n\n      var lastIndex = selectValue.length - 1;\n      var nextFocus = -1;\n      if (!selectValue.length) return;\n\n      switch (direction) {\n        case 'previous':\n          if (focusedIndex === 0) {\n            // don't cycle from the start to the end\n            nextFocus = 0;\n          } else if (focusedIndex === -1) {\n            // if nothing is focused, focus the last value first\n            nextFocus = lastIndex;\n          } else {\n            nextFocus = focusedIndex - 1;\n          }\n\n          break;\n\n        case 'next':\n          if (focusedIndex > -1 && focusedIndex < lastIndex) {\n            nextFocus = focusedIndex + 1;\n          }\n\n          break;\n      }\n\n      if (nextFocus === -1) {\n        this.announceAriaLiveContext({\n          event: 'input',\n          context: {\n            isSearchable: isSearchable,\n            isMulti: isMulti\n          }\n        });\n      }\n\n      this.setState({\n        inputIsHidden: nextFocus === -1 ? false : true,\n        focusedValue: selectValue[nextFocus]\n      });\n    }\n  }, {\n    key: 'focusOption',\n    value: function focusOption() {\n      var direction = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'first';\n      var pageSize = this.props.pageSize;\n      var _state3 = this.state,\n          focusedOption = _state3.focusedOption,\n          menuOptions = _state3.menuOptions;\n      var options = menuOptions.focusable;\n      if (!options.length) return;\n      var nextFocus = 0; // handles 'first'\n\n      var focusedIndex = options.indexOf(focusedOption);\n\n      if (!focusedOption) {\n        focusedIndex = -1;\n        this.announceAriaLiveContext({\n          event: 'menu'\n        });\n      }\n\n      if (direction === 'up') {\n        nextFocus = focusedIndex > 0 ? focusedIndex - 1 : options.length - 1;\n      } else if (direction === 'down') {\n        nextFocus = (focusedIndex + 1) % options.length;\n      } else if (direction === 'pageup') {\n        nextFocus = focusedIndex - pageSize;\n        if (nextFocus < 0) nextFocus = 0;\n      } else if (direction === 'pagedown') {\n        nextFocus = focusedIndex + pageSize;\n        if (nextFocus > options.length - 1) nextFocus = options.length - 1;\n      } else if (direction === 'last') {\n        nextFocus = options.length - 1;\n      }\n\n      this.scrollToFocusedOptionOnUpdate = true;\n      this.setState({\n        focusedOption: options[nextFocus],\n        focusedValue: null\n      });\n    }\n  }, {\n    key: 'getCommonProps',\n    // ==============================\n    // Getters\n    // ==============================\n    value: function getCommonProps() {\n      var clearValue = this.clearValue,\n          getStyles = this.getStyles,\n          setValue = this.setValue,\n          selectOption = this.selectOption,\n          props = this.props;\n      var className = props.className,\n          classNamePrefix = props.classNamePrefix,\n          isMulti = props.isMulti,\n          isRtl = props.isRtl,\n          options = props.options;\n      var selectValue = this.state.selectValue;\n      var hasValue = this.hasValue();\n\n      var getValue = function getValue() {\n        return selectValue;\n      };\n\n      var cxPrefix = classNamePrefix;\n\n      if (className && classNamePrefix === undefined) {\n        console.warn('\\n        Warning: the behaviour of \\'className\\' has changed between 2.0.0-beta.2 and 2.0.0-beta.3.\\n        You can now use className to specify the class name of the outer container, and classNamePrefix to enable our provided BEM class names for internal elements.\\n        The className prop will have no effect on internal elements when 2.0.0 is released.\\n      ');\n        cxPrefix = className;\n      }\n\n      var cx = _utils.classNames.bind(null, cxPrefix);\n\n      return {\n        cx: cx,\n        clearValue: clearValue,\n        getStyles: getStyles,\n        getValue: getValue,\n        hasValue: hasValue,\n        isMulti: isMulti,\n        isRtl: isRtl,\n        options: options,\n        selectOption: selectOption,\n        setValue: setValue,\n        selectProps: props\n      };\n    }\n  }, {\n    key: 'getNextFocusedValue',\n    value: function getNextFocusedValue(nextSelectValue) {\n      if (this.clearFocusValueOnUpdate) {\n        this.clearFocusValueOnUpdate = false;\n        return null;\n      }\n\n      var _state4 = this.state,\n          focusedValue = _state4.focusedValue,\n          lastSelectValue = _state4.selectValue;\n      var lastFocusedIndex = lastSelectValue.indexOf(focusedValue);\n\n      if (lastFocusedIndex > -1) {\n        var nextFocusedIndex = nextSelectValue.indexOf(focusedValue);\n\n        if (nextFocusedIndex > -1) {\n          // the focused value is still in the selectValue, return it\n          return focusedValue;\n        } else if (lastFocusedIndex < nextSelectValue.length) {\n          // the focusedValue is not present in the next selectValue array by\n          // reference, so return the new value at the same index\n          return nextSelectValue[lastFocusedIndex];\n        }\n      }\n\n      return null;\n    }\n  }, {\n    key: 'getNextFocusedOption',\n    value: function getNextFocusedOption(options) {\n      var lastFocusedOption = this.state.focusedOption;\n      return lastFocusedOption && options.indexOf(lastFocusedOption) > -1 ? lastFocusedOption : options[0];\n    } // ==============================\n    // Helpers\n    // ==============================\n\n  }, {\n    key: 'hasValue',\n    value: function hasValue() {\n      var selectValue = this.state.selectValue;\n      return selectValue.length > 0;\n    }\n  }, {\n    key: 'hasOptions',\n    value: function hasOptions() {\n      return !!this.state.menuOptions.render.length;\n    }\n  }, {\n    key: 'countOptions',\n    value: function countOptions() {\n      return this.state.menuOptions.focusable.length;\n    }\n  }, {\n    key: 'isClearable',\n    value: function isClearable() {\n      var _props5 = this.props,\n          isClearable = _props5.isClearable,\n          isMulti = _props5.isMulti; // single select, by default, IS NOT clearable\n      // multi select, by default, IS clearable\n\n      if (isClearable === undefined) return isMulti;\n      return isClearable;\n    }\n  }, {\n    key: 'isOptionDisabled',\n    value: function isOptionDisabled(option) {\n      return typeof this.props.isOptionDisabled === 'function' ? this.props.isOptionDisabled(option) : false;\n    }\n  }, {\n    key: 'isOptionSelected',\n    value: function isOptionSelected(option, selectValue) {\n      var _this2 = this;\n\n      if (selectValue.indexOf(option) > -1) return true;\n\n      if (typeof this.props.isOptionSelected === 'function') {\n        return this.props.isOptionSelected(option, selectValue);\n      }\n\n      var candidate = this.getOptionValue(option);\n      return selectValue.some(function (i) {\n        return _this2.getOptionValue(i) === candidate;\n      });\n    }\n  }, {\n    key: 'filterOption',\n    value: function filterOption(option, inputValue) {\n      return this.props.filterOption ? this.props.filterOption(option, inputValue) : true;\n    }\n  }, {\n    key: 'formatOptionLabel',\n    value: function formatOptionLabel(data, context) {\n      if (typeof this.props.formatOptionLabel === 'function') {\n        var _inputValue = this.props.inputValue;\n        var _selectValue2 = this.state.selectValue;\n        return this.props.formatOptionLabel(data, {\n          context: context,\n          inputValue: _inputValue,\n          selectValue: _selectValue2\n        });\n      } else {\n        return this.getOptionLabel(data);\n      }\n    }\n  }, {\n    key: 'formatGroupLabel',\n    value: function formatGroupLabel(data) {\n      return this.props.formatGroupLabel(data);\n    } // ==============================\n    // Mouse Handlers\n    // ==============================\n\n  }, {\n    key: 'startListeningToTouch',\n    // ==============================\n    // Touch Handlers\n    // ==============================\n    value: function startListeningToTouch() {\n      if (document && document.addEventListener) {\n        document.addEventListener('touchstart', this.onTouchStart, false);\n        document.addEventListener('touchmove', this.onTouchMove, false);\n        document.addEventListener('touchend', this.onTouchEnd, false);\n      }\n    }\n  }, {\n    key: 'stopListeningToTouch',\n    value: function stopListeningToTouch() {\n      if (document && document.removeEventListener) {\n        document.removeEventListener('touchstart', this.onTouchStart);\n        document.removeEventListener('touchmove', this.onTouchMove);\n        document.removeEventListener('touchend', this.onTouchEnd);\n      }\n    } // ==============================\n    // Focus Handlers\n    // ==============================\n    // ==============================\n    // Keyboard Handlers\n    // ==============================\n\n  }, {\n    key: 'buildMenuOptions',\n    // ==============================\n    // Menu Options\n    // ==============================\n    value: function buildMenuOptions(props, selectValue) {\n      var _this3 = this;\n\n      var _props$inputValue = props.inputValue,\n          inputValue = _props$inputValue === undefined ? '' : _props$inputValue,\n          options = props.options;\n\n      var toOption = function toOption(option, id) {\n        var isDisabled = _this3.isOptionDisabled(option);\n\n        var isSelected = _this3.isOptionSelected(option, selectValue);\n\n        var label = _this3.getOptionLabel(option);\n\n        var value = _this3.getOptionValue(option);\n\n        if (_this3.shouldHideSelectedOptions() && isSelected || !_this3.filterOption({\n          label: label,\n          value: value,\n          data: option\n        }, inputValue)) {\n          return;\n        }\n\n        var onHover = isDisabled ? undefined : function () {\n          return _this3.onOptionHover(option);\n        };\n        var onSelect = isDisabled ? undefined : function () {\n          return _this3.selectOption(option);\n        };\n        var optionId = _this3.getElementId('option') + '-' + id;\n        return {\n          innerProps: {\n            id: optionId,\n            onClick: onSelect,\n            onMouseMove: onHover,\n            onMouseOver: onHover,\n            role: 'option',\n            tabIndex: -1\n          },\n          data: option,\n          isDisabled: isDisabled,\n          isSelected: isSelected,\n          key: optionId,\n          label: label,\n          type: 'option',\n          value: value\n        };\n      };\n\n      return options.reduce(function (acc, item, itemIndex) {\n        if (item.options) {\n          // TODO needs a tidier implementation\n          if (!_this3.hasGroups) _this3.hasGroups = true;\n          var items = item.options;\n          var children = items.map(function (child, i) {\n            var option = toOption(child, itemIndex + '-' + i);\n            if (option && !option.isDisabled) acc.focusable.push(child);\n            return option;\n          }).filter(Boolean);\n\n          if (children.length) {\n            var groupId = _this3.getElementId('group') + '-' + itemIndex;\n            acc.render.push({\n              type: 'group',\n              key: groupId,\n              data: item,\n              options: children\n            });\n          }\n        } else {\n          var option = toOption(item, '' + itemIndex);\n\n          if (option) {\n            acc.render.push(option);\n            if (!option.isDisabled) acc.focusable.push(item);\n          }\n        }\n\n        return acc;\n      }, {\n        render: [],\n        focusable: []\n      });\n    } // ==============================\n    // Renderers\n    // ==============================\n\n  }, {\n    key: 'constructAriaLiveMessage',\n    value: function constructAriaLiveMessage() {\n      var _state5 = this.state,\n          ariaLiveContext = _state5.ariaLiveContext,\n          selectValue = _state5.selectValue,\n          focusedValue = _state5.focusedValue,\n          focusedOption = _state5.focusedOption;\n      var _props6 = this.props,\n          options = _props6.options,\n          menuIsOpen = _props6.menuIsOpen,\n          inputValue = _props6.inputValue,\n          screenReaderStatus = _props6.screenReaderStatus; // An aria live message representing the currently focused value in the select.\n\n      var focusedValueMsg = focusedValue ? (0, _index2.valueFocusAriaMessage)({\n        focusedValue: focusedValue,\n        getOptionLabel: this.getOptionLabel,\n        selectValue: selectValue\n      }) : ''; // An aria live message representing the currently focused option in the select.\n\n      var focusedOptionMsg = focusedOption && menuIsOpen ? (0, _index2.optionFocusAriaMessage)({\n        focusedOption: focusedOption,\n        getOptionLabel: this.getOptionLabel,\n        options: options\n      }) : ''; // An aria live message representing the set of focusable results and current searchterm/inputvalue.\n\n      var resultsMsg = (0, _index2.resultsAriaMessage)({\n        inputValue: inputValue,\n        screenReaderMessage: screenReaderStatus({\n          count: this.countOptions()\n        })\n      });\n      return focusedValueMsg + ' ' + focusedOptionMsg + ' ' + resultsMsg + ' ' + ariaLiveContext;\n    }\n  }, {\n    key: 'renderInput',\n    value: function renderInput() {\n      var _props7 = this.props,\n          isDisabled = _props7.isDisabled,\n          isSearchable = _props7.isSearchable,\n          inputId = _props7.inputId,\n          inputValue = _props7.inputValue,\n          tabIndex = _props7.tabIndex;\n      var Input = this.components.Input;\n      var inputIsHidden = this.state.inputIsHidden;\n      var id = inputId || this.getElementId('input');\n\n      if (!isSearchable) {\n        // use a dummy input to maintain focus/blur functionality\n        return _react2.default.createElement(_index.DummyInput, {\n          id: id,\n          innerRef: this.getInputRef,\n          onBlur: this.onInputBlur,\n          onChange: _utils.noop,\n          onFocus: this.onInputFocus,\n          readOnly: true,\n          tabIndex: tabIndex,\n          value: ''\n        });\n      } // aria attributes makes the JSX \"noisy\", separated for clarity\n\n\n      var ariaAttributes = {\n        'aria-autocomplete': 'list',\n        'aria-label': this.props['aria-label'],\n        'aria-labelledby': this.props['aria-labelledby']\n      };\n      var cx = this.commonProps.cx;\n      return _react2.default.createElement(Input, _extends({\n        autoCapitalize: 'none',\n        autoComplete: 'off',\n        autoCorrect: 'off',\n        cx: cx,\n        getStyles: this.getStyles,\n        id: id,\n        innerRef: this.getInputRef,\n        isDisabled: isDisabled,\n        isHidden: inputIsHidden,\n        onBlur: this.onInputBlur,\n        onChange: this.handleInputChange,\n        onFocus: this.onInputFocus,\n        spellCheck: 'false',\n        tabIndex: tabIndex,\n        type: 'text',\n        value: inputValue\n      }, ariaAttributes));\n    }\n  }, {\n    key: 'renderPlaceholderOrValue',\n    value: function renderPlaceholderOrValue() {\n      var _this4 = this;\n\n      var _components = this.components,\n          MultiValue = _components.MultiValue,\n          MultiValueContainer = _components.MultiValueContainer,\n          MultiValueLabel = _components.MultiValueLabel,\n          MultiValueRemove = _components.MultiValueRemove,\n          SingleValue = _components.SingleValue,\n          Placeholder = _components.Placeholder;\n      var commonProps = this.commonProps;\n      var _props8 = this.props,\n          controlShouldRenderValue = _props8.controlShouldRenderValue,\n          isDisabled = _props8.isDisabled,\n          isMulti = _props8.isMulti,\n          inputValue = _props8.inputValue,\n          placeholder = _props8.placeholder;\n      var _state6 = this.state,\n          selectValue = _state6.selectValue,\n          focusedValue = _state6.focusedValue;\n\n      if (!this.hasValue() || !controlShouldRenderValue) {\n        return inputValue ? null : _react2.default.createElement(Placeholder, _extends({}, commonProps, {\n          key: 'placeholder',\n          isDisabled: isDisabled\n        }), placeholder);\n      }\n\n      if (isMulti) {\n        var selectValues = selectValue.map(function (opt) {\n          var isFocused = opt === focusedValue;\n          return _react2.default.createElement(MultiValue, _extends({}, commonProps, {\n            components: {\n              Container: MultiValueContainer,\n              Label: MultiValueLabel,\n              Remove: MultiValueRemove\n            },\n            isFocused: isFocused,\n            isDisabled: isDisabled,\n            key: _this4.getOptionValue(opt),\n            removeProps: {\n              onClick: function onClick() {\n                return _this4.removeValue(opt);\n              },\n              onTouchEnd: function onTouchEnd() {\n                return _this4.removeValue(opt);\n              },\n              onMouseDown: function onMouseDown(e) {\n                e.preventDefault();\n                e.stopPropagation();\n              }\n            },\n            data: opt\n          }), _this4.formatOptionLabel(opt, 'value'));\n        });\n        return selectValues;\n      }\n\n      if (inputValue) {\n        return null;\n      }\n\n      var singleValue = selectValue[0];\n      return _react2.default.createElement(SingleValue, _extends({}, commonProps, {\n        data: singleValue,\n        isDisabled: isDisabled\n      }), this.formatOptionLabel(singleValue, 'value'));\n    }\n  }, {\n    key: 'renderClearIndicator',\n    value: function renderClearIndicator() {\n      var ClearIndicator = this.components.ClearIndicator;\n      var commonProps = this.commonProps;\n      var _props9 = this.props,\n          isDisabled = _props9.isDisabled,\n          isLoading = _props9.isLoading;\n      var isFocused = this.state.isFocused;\n\n      if (!this.isClearable() || !ClearIndicator || isDisabled || !this.hasValue() || isLoading) {\n        return null;\n      }\n\n      var innerProps = {\n        onMouseDown: this.onClearIndicatorMouseDown,\n        onTouchEnd: this.onClearIndicatorTouchEnd,\n        'aria-hidden': 'true'\n      };\n      return _react2.default.createElement(ClearIndicator, _extends({}, commonProps, {\n        innerProps: innerProps,\n        isFocused: isFocused\n      }));\n    }\n  }, {\n    key: 'renderLoadingIndicator',\n    value: function renderLoadingIndicator() {\n      var LoadingIndicator = this.components.LoadingIndicator;\n      var commonProps = this.commonProps;\n      var _props10 = this.props,\n          isDisabled = _props10.isDisabled,\n          isLoading = _props10.isLoading;\n      var isFocused = this.state.isFocused;\n      if (!LoadingIndicator || !isLoading) return null;\n      var innerProps = {\n        'aria-hidden': 'true'\n      };\n      return _react2.default.createElement(LoadingIndicator, _extends({}, commonProps, {\n        innerProps: innerProps,\n        isDisabled: isDisabled,\n        isFocused: isFocused\n      }));\n    }\n  }, {\n    key: 'renderIndicatorSeparator',\n    value: function renderIndicatorSeparator() {\n      var _components2 = this.components,\n          DropdownIndicator = _components2.DropdownIndicator,\n          IndicatorSeparator = _components2.IndicatorSeparator; // separator doesn't make sense without the dropdown indicator\n\n      if (!DropdownIndicator || !IndicatorSeparator) return null;\n      var commonProps = this.commonProps;\n      var isDisabled = this.props.isDisabled;\n      var isFocused = this.state.isFocused;\n      return _react2.default.createElement(IndicatorSeparator, _extends({}, commonProps, {\n        isDisabled: isDisabled,\n        isFocused: isFocused\n      }));\n    }\n  }, {\n    key: 'renderDropdownIndicator',\n    value: function renderDropdownIndicator() {\n      var DropdownIndicator = this.components.DropdownIndicator;\n      if (!DropdownIndicator) return null;\n      var commonProps = this.commonProps;\n      var isDisabled = this.props.isDisabled;\n      var isFocused = this.state.isFocused;\n      var innerProps = {\n        onMouseDown: this.onDropdownIndicatorMouseDown,\n        onTouchEnd: this.onDropdownIndicatorTouchEnd,\n        'aria-hidden': 'true'\n      };\n      return _react2.default.createElement(DropdownIndicator, _extends({}, commonProps, {\n        innerProps: innerProps,\n        isDisabled: isDisabled,\n        isFocused: isFocused\n      }));\n    }\n  }, {\n    key: 'renderMenu',\n    value: function renderMenu() {\n      var _this5 = this;\n\n      var _components3 = this.components,\n          Group = _components3.Group,\n          GroupHeading = _components3.GroupHeading,\n          Menu = _components3.Menu,\n          MenuList = _components3.MenuList,\n          MenuPortal = _components3.MenuPortal,\n          LoadingMessage = _components3.LoadingMessage,\n          NoOptionsMessage = _components3.NoOptionsMessage,\n          Option = _components3.Option;\n      var commonProps = this.commonProps;\n      var _state7 = this.state,\n          focusedOption = _state7.focusedOption,\n          menuOptions = _state7.menuOptions;\n      var _props11 = this.props,\n          captureMenuScroll = _props11.captureMenuScroll,\n          inputValue = _props11.inputValue,\n          isLoading = _props11.isLoading,\n          loadingMessage = _props11.loadingMessage,\n          minMenuHeight = _props11.minMenuHeight,\n          maxMenuHeight = _props11.maxMenuHeight,\n          menuIsOpen = _props11.menuIsOpen,\n          menuPlacement = _props11.menuPlacement,\n          menuPosition = _props11.menuPosition,\n          menuPortalTarget = _props11.menuPortalTarget,\n          menuShouldBlockScroll = _props11.menuShouldBlockScroll,\n          menuShouldScrollIntoView = _props11.menuShouldScrollIntoView,\n          noOptionsMessage = _props11.noOptionsMessage,\n          onMenuScrollToTop = _props11.onMenuScrollToTop,\n          onMenuScrollToBottom = _props11.onMenuScrollToBottom;\n      if (!menuIsOpen) return null; // TODO: Internal Option Type here\n\n      var render = function render(props) {\n        // for performance, the menu options in state aren't changed when the\n        // focused option changes so we calculate additional props based on that\n        var isFocused = focusedOption === props.data;\n        props.innerProps.innerRef = isFocused ? _this5.getFocusedOptionRef : undefined;\n        return _react2.default.createElement(Option, _extends({}, commonProps, props, {\n          isFocused: isFocused\n        }), _this5.formatOptionLabel(props.data, 'menu'));\n      };\n\n      var menuUI = void 0;\n\n      if (this.hasOptions()) {\n        menuUI = menuOptions.render.map(function (item) {\n          if (item.type === 'group') {\n            var type = item.type,\n                group = _objectWithoutProperties(item, ['type']);\n\n            var headingId = item.key + '-heading';\n            return _react2.default.createElement(Group, _extends({}, commonProps, group, {\n              Heading: GroupHeading,\n              headingProps: {\n                id: headingId\n              },\n              label: _this5.formatGroupLabel(item.data)\n            }), item.options.map(function (option) {\n              return render(option);\n            }));\n          } else if (item.type === 'option') {\n            return render(item);\n          }\n        });\n      } else if (isLoading) {\n        var message = loadingMessage({\n          inputValue: inputValue\n        });\n        if (message === null) return null;\n        menuUI = _react2.default.createElement(LoadingMessage, commonProps, message);\n      } else {\n        var _message = noOptionsMessage({\n          inputValue: inputValue\n        });\n\n        if (_message === null) return null;\n        menuUI = _react2.default.createElement(NoOptionsMessage, commonProps, _message);\n      }\n\n      var menuElement = _react2.default.createElement('div', null, _react2.default.createElement(Menu, _extends({}, commonProps, {\n        innerProps: {\n          onMouseDown: this.onMenuMouseDown,\n          onMouseMove: this.onMenuMouseMove\n        },\n        isLoading: isLoading,\n        minMenuHeight: minMenuHeight,\n        maxMenuHeight: maxMenuHeight,\n        menuPlacement: menuPlacement,\n        menuPosition: menuPosition,\n        menuShouldScrollIntoView: menuShouldScrollIntoView\n      }), _react2.default.createElement(_index.ScrollCaptor, {\n        isEnabled: captureMenuScroll,\n        onTopArrive: onMenuScrollToTop,\n        onBottomArrive: onMenuScrollToBottom\n      }, _react2.default.createElement(_index.ScrollBlock, {\n        isEnabled: menuShouldBlockScroll\n      }, _react2.default.createElement(MenuList, _extends({}, commonProps, {\n        innerProps: {\n          innerRef: this.getMenuListRef\n        },\n        isLoading: isLoading,\n        maxHeight: maxMenuHeight\n      }), menuUI))))); // positioning behaviour is almost identical for portalled and fixed,\n      // so we use the same component. the actual portalling logic is forked\n      // within the component based on `menuPosition`\n\n\n      return menuPortalTarget || menuPosition === 'fixed' ? _react2.default.createElement(MenuPortal, _extends({}, commonProps, {\n        appendTo: menuPortalTarget,\n        controlElement: this.controlRef,\n        menuPlacement: menuPlacement,\n        menuPosition: menuPosition\n      }), menuElement) : menuElement;\n    }\n  }, {\n    key: 'renderFormField',\n    value: function renderFormField() {\n      var _this6 = this;\n\n      var _props12 = this.props,\n          delimiter = _props12.delimiter,\n          isDisabled = _props12.isDisabled,\n          isMulti = _props12.isMulti,\n          name = _props12.name;\n      var selectValue = this.state.selectValue;\n      if (!name || isDisabled) return;\n\n      if (isMulti) {\n        if (delimiter) {\n          var _value = selectValue.map(function (opt) {\n            return _this6.getOptionValue(opt);\n          }).join(delimiter);\n\n          return _react2.default.createElement('input', {\n            name: name,\n            type: 'hidden',\n            value: _value\n          });\n        } else {\n          return _react2.default.createElement('div', null, selectValue.map(function (opt, i) {\n            return _react2.default.createElement('input', {\n              key: 'i-' + i,\n              name: name,\n              type: 'hidden',\n              value: _this6.getOptionValue(opt)\n            });\n          }));\n        }\n      } else {\n        var _value2 = selectValue[0] ? this.getOptionValue(selectValue[0]) : '';\n\n        return _react2.default.createElement('input', {\n          name: name,\n          type: 'hidden',\n          value: _value2\n        });\n      }\n    }\n  }, {\n    key: 'renderLiveRegion',\n    value: function renderLiveRegion() {\n      if (!this.state.isFocused) return null;\n      return _react2.default.createElement(_primitives.A11yText, {\n        'aria-live': 'assertive'\n      }, _react2.default.createElement('p', {\n        id: 'aria-selection-event'\n      }, '\\xA0', this.state.ariaLiveSelection), _react2.default.createElement('p', {\n        id: 'aria-context'\n      }, '\\xA0', this.constructAriaLiveMessage()));\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _components4 = this.components,\n          Control = _components4.Control,\n          IndicatorsContainer = _components4.IndicatorsContainer,\n          SelectContainer = _components4.SelectContainer,\n          ValueContainer = _components4.ValueContainer;\n      var _props13 = this.props,\n          className = _props13.className,\n          id = _props13.id,\n          isDisabled = _props13.isDisabled;\n      var isFocused = this.state.isFocused;\n      var commonProps = this.commonProps = this.getCommonProps();\n      return _react2.default.createElement(SelectContainer, _extends({}, commonProps, {\n        className: className,\n        innerProps: {\n          id: id,\n          onKeyDown: this.onKeyDown\n        },\n        isDisabled: isDisabled,\n        isFocused: isFocused\n      }), this.renderLiveRegion(), _react2.default.createElement(Control, _extends({}, commonProps, {\n        innerProps: {\n          innerRef: this.getControlRef,\n          onMouseDown: this.onControlMouseDown,\n          onTouchEnd: this.onControlTouchEnd\n        },\n        isDisabled: isDisabled,\n        isFocused: isFocused\n      }), _react2.default.createElement(ValueContainer, _extends({}, commonProps, {\n        isDisabled: isDisabled\n      }), this.renderPlaceholderOrValue(), this.renderInput()), _react2.default.createElement(IndicatorsContainer, _extends({}, commonProps, {\n        isDisabled: isDisabled\n      }), this.renderClearIndicator(), this.renderLoadingIndicator(), this.renderIndicatorSeparator(), this.renderDropdownIndicator())), this.renderMenu(), this.renderFormField());\n    }\n  }]);\n\n  return Select;\n}(_react.Component);\n\nSelect.defaultProps = defaultProps;\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this7 = this;\n\n  this.state = {\n    ariaLiveSelection: '',\n    ariaLiveContext: '',\n    focusedOption: null,\n    focusedValue: null,\n    inputIsHidden: false,\n    isFocused: false,\n    menuOptions: {\n      render: [],\n      focusable: []\n    },\n    selectValue: []\n  };\n  this.blockOptionHover = false;\n  this.clearFocusValueOnUpdate = false;\n  this.hasGroups = false;\n  this.initialTouchX = 0;\n  this.initialTouchY = 0;\n  this.instancePrefix = '';\n  this.openAfterFocus = false;\n  this.scrollToFocusedOptionOnUpdate = false;\n  this.controlRef = null;\n\n  this.getControlRef = function (ref) {\n    _this7.controlRef = ref;\n  };\n\n  this.focusedOptionRef = null;\n\n  this.getFocusedOptionRef = function (ref) {\n    _this7.focusedOptionRef = ref;\n  };\n\n  this.menuListRef = null;\n\n  this.getMenuListRef = function (ref) {\n    _this7.menuListRef = ref;\n  };\n\n  this.inputRef = null;\n\n  this.getInputRef = function (ref) {\n    _this7.inputRef = ref;\n  };\n\n  this.focus = this.focusInput;\n  this.blur = this.blurInput;\n\n  this.setValue = function (newValue) {\n    var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'set-value';\n    var option = arguments[2];\n    var _props14 = _this7.props,\n        closeMenuOnSelect = _props14.closeMenuOnSelect,\n        isMulti = _props14.isMulti,\n        onChange = _props14.onChange;\n\n    _this7.onInputChange('', {\n      action: 'set-value'\n    });\n\n    if (closeMenuOnSelect) {\n      _this7.inputIsHiddenAfterUpdate = !isMulti;\n\n      _this7.onMenuClose();\n    } // when the select value should change, we should reset focusedValue\n\n\n    _this7.clearFocusValueOnUpdate = true;\n    onChange(newValue, {\n      action: action,\n      option: option\n    });\n  };\n\n  this.selectOption = function (newValue) {\n    var _props15 = _this7.props,\n        blurInputOnSelect = _props15.blurInputOnSelect,\n        isMulti = _props15.isMulti;\n\n    if (isMulti) {\n      var _selectValue3 = _this7.state.selectValue;\n\n      if (_this7.isOptionSelected(newValue, _selectValue3)) {\n        var candidate = _this7.getOptionValue(newValue);\n\n        _this7.setValue(_selectValue3.filter(function (i) {\n          return _this7.getOptionValue(i) !== candidate;\n        }), 'deselect-option', newValue);\n\n        _this7.announceAriaLiveSelection({\n          event: 'deselect-option',\n          context: {\n            value: _this7.getOptionLabel(newValue)\n          }\n        });\n      } else {\n        _this7.setValue([].concat(_toConsumableArray(_selectValue3), [newValue]), 'select-option', newValue);\n\n        _this7.announceAriaLiveSelection({\n          event: 'select-option',\n          context: {\n            value: _this7.getOptionLabel(newValue)\n          }\n        });\n      }\n    } else {\n      _this7.setValue(newValue, 'select-option');\n\n      _this7.announceAriaLiveSelection({\n        event: 'select-option',\n        context: {\n          value: _this7.getOptionLabel(newValue)\n        }\n      });\n    }\n\n    if (blurInputOnSelect) {\n      _this7.blurInput();\n    }\n  };\n\n  this.removeValue = function (removedValue) {\n    var onChange = _this7.props.onChange;\n    var selectValue = _this7.state.selectValue;\n\n    var candidate = _this7.getOptionValue(removedValue);\n\n    onChange(selectValue.filter(function (i) {\n      return _this7.getOptionValue(i) !== candidate;\n    }), {\n      action: 'remove-value',\n      removedValue: removedValue\n    });\n\n    _this7.announceAriaLiveSelection({\n      event: 'remove-value',\n      context: {\n        value: removedValue ? _this7.getOptionLabel(removedValue) : undefined\n      }\n    });\n\n    _this7.focusInput();\n  };\n\n  this.clearValue = function () {\n    var _props16 = _this7.props,\n        isMulti = _props16.isMulti,\n        onChange = _props16.onChange;\n    onChange(isMulti ? [] : null, {\n      action: 'clear'\n    });\n  };\n\n  this.popValue = function () {\n    var onChange = _this7.props.onChange;\n    var selectValue = _this7.state.selectValue;\n    var lastSelectedValue = selectValue[selectValue.length - 1];\n\n    _this7.announceAriaLiveSelection({\n      event: 'pop-value',\n      context: {\n        value: lastSelectedValue ? _this7.getOptionLabel(lastSelectedValue) : undefined\n      }\n    });\n\n    onChange(selectValue.slice(0, selectValue.length - 1), {\n      action: 'pop-value',\n      removedValue: lastSelectedValue\n    });\n  };\n\n  this.getOptionLabel = function (data) {\n    return _this7.props.getOptionLabel(data);\n  };\n\n  this.getOptionValue = function (data) {\n    return _this7.props.getOptionValue(data);\n  };\n\n  this.getStyles = function (key, props) {\n    var base = _styles.defaultStyles[key](props);\n\n    base.boxSizing = 'border-box';\n    var custom = _this7.props.styles[key];\n    return custom ? custom(base, props) : base;\n  };\n\n  this.getElementId = function (element) {\n    return _this7.instancePrefix + '-' + element;\n  };\n\n  this.getActiveDescendentId = function () {\n    var menuIsOpen = _this7.props.menuIsOpen;\n    var _state8 = _this7.state,\n        menuOptions = _state8.menuOptions,\n        focusedOption = _state8.focusedOption;\n    if (!focusedOption || !menuIsOpen) return undefined;\n    var index = menuOptions.focusable.indexOf(focusedOption);\n    var option = menuOptions.render[index];\n    return option && option.key;\n  };\n\n  this.announceAriaLiveSelection = function (_ref2) {\n    var event = _ref2.event,\n        context = _ref2.context;\n\n    _this7.setState({\n      ariaLiveSelection: (0, _index2.valueEventAriaMessage)(event, context)\n    });\n  };\n\n  this.announceAriaLiveContext = function (_ref3) {\n    var event = _ref3.event,\n        context = _ref3.context;\n\n    _this7.setState({\n      ariaLiveContext: (0, _index2.instructionsAriaMessage)(event, _extends({}, context, {\n        label: _this7.props['aria-label']\n      }))\n    });\n  };\n\n  this.onMenuMouseDown = function (event) {\n    if (event.button !== 0) {\n      return;\n    }\n\n    event.stopPropagation();\n    event.preventDefault();\n\n    _this7.focusInput();\n  };\n\n  this.onMenuMouseMove = function (event) {\n    _this7.blockOptionHover = false;\n  };\n\n  this.onControlMouseDown = function (event) {\n    var openMenuOnClick = _this7.props.openMenuOnClick;\n\n    if (!_this7.state.isFocused) {\n      if (openMenuOnClick) {\n        _this7.openAfterFocus = true;\n      }\n\n      _this7.focusInput();\n    } else if (!_this7.props.menuIsOpen) {\n      _this7.openMenu('first');\n    } else {\n      _this7.onMenuClose();\n    } // $FlowFixMe HTMLElement type does not have tagName property\n\n\n    if (event.target.tagName !== 'INPUT') {\n      event.preventDefault();\n    }\n  };\n\n  this.onDropdownIndicatorMouseDown = function (event) {\n    // ignore mouse events that weren't triggered by the primary button\n    if (event && event.type === 'mousedown' && event.button !== 0) {\n      return;\n    }\n\n    if (_this7.props.isDisabled) return;\n    var _props17 = _this7.props,\n        isMulti = _props17.isMulti,\n        menuIsOpen = _props17.menuIsOpen;\n\n    _this7.focusInput();\n\n    if (menuIsOpen) {\n      _this7.inputIsHiddenAfterUpdate = !isMulti;\n\n      _this7.onMenuClose();\n    } else {\n      _this7.openMenu('first');\n    }\n\n    event.preventDefault();\n    event.stopPropagation();\n  };\n\n  this.onClearIndicatorMouseDown = function (event) {\n    // ignore mouse events that weren't triggered by the primary button\n    if (event && event.type === 'mousedown' && event.button !== 0) {\n      return;\n    }\n\n    _this7.clearValue();\n\n    event.stopPropagation();\n    _this7.openAfterFocus = false;\n    setTimeout(function () {\n      return _this7.focusInput();\n    });\n  };\n\n  this.onTouchStart = function (_ref4) {\n    var _ref4$touches = _slicedToArray(_ref4.touches, 1),\n        touch = _ref4$touches[0];\n\n    _this7.initialTouchX = touch.clientX;\n    _this7.initialTouchY = touch.clientY;\n    _this7.userIsDragging = false;\n  };\n\n  this.onTouchMove = function (_ref5) {\n    var _ref5$touches = _slicedToArray(_ref5.touches, 1),\n        touch = _ref5$touches[0];\n\n    var deltaX = Math.abs(touch.clientX - _this7.initialTouchX);\n    var deltaY = Math.abs(touch.clientY - _this7.initialTouchY);\n    var moveThreshold = 5;\n    _this7.userIsDragging = deltaX > moveThreshold || deltaY > moveThreshold;\n  };\n\n  this.onTouchEnd = function (event) {\n    if (_this7.userIsDragging) return; // type cast the EventTarget\n\n    var target = event.target; // close the menu if the user taps outside\n\n    if (_this7.controlRef && !_this7.controlRef.contains(target) && _this7.menuListRef && !_this7.menuListRef.contains(target)) {\n      _this7.blurInput();\n    } // reset move vars\n\n\n    _this7.initialTouchX = 0;\n    _this7.initialTouchY = 0;\n  };\n\n  this.onControlTouchEnd = function (event) {\n    if (_this7.userIsDragging) return;\n\n    _this7.onControlMouseDown(event);\n  };\n\n  this.onClearIndicatorTouchEnd = function (event) {\n    if (_this7.userIsDragging) return;\n\n    _this7.onClearIndicatorMouseDown(event);\n  };\n\n  this.onDropdownIndicatorTouchEnd = function (event) {\n    if (_this7.userIsDragging) return;\n\n    _this7.onDropdownIndicatorMouseDown(event);\n  };\n\n  this.handleInputChange = function (event) {\n    var inputValue = event.currentTarget.value;\n    _this7.inputIsHiddenAfterUpdate = false;\n\n    _this7.onInputChange(inputValue, {\n      action: 'input-change'\n    });\n\n    _this7.onMenuOpen();\n  };\n\n  this.onInputFocus = function (event) {\n    var _props18 = _this7.props,\n        isSearchable = _props18.isSearchable,\n        isMulti = _props18.isMulti;\n\n    if (_this7.props.onFocus) {\n      _this7.props.onFocus(event);\n    }\n\n    _this7.inputIsHiddenAfterUpdate = false;\n\n    _this7.announceAriaLiveContext({\n      event: 'input',\n      context: {\n        isSearchable: isSearchable,\n        isMulti: isMulti\n      }\n    });\n\n    _this7.setState({\n      isFocused: true\n    });\n\n    if (_this7.openAfterFocus || _this7.props.openMenuOnFocus) {\n      _this7.openMenu('first');\n    }\n\n    _this7.openAfterFocus = false;\n  };\n\n  this.onInputBlur = function (event) {\n    if (_this7.props.onBlur) {\n      _this7.props.onBlur(event);\n    }\n\n    _this7.onInputChange('', {\n      action: 'input-blur'\n    });\n\n    _this7.onMenuClose();\n\n    _this7.setState({\n      focusedValue: null,\n      isFocused: false\n    });\n  };\n\n  this.onOptionHover = function (focusedOption) {\n    if (_this7.blockOptionHover || _this7.state.focusedOption === focusedOption) {\n      return;\n    }\n\n    _this7.setState({\n      focusedOption: focusedOption\n    });\n  };\n\n  this.shouldHideSelectedOptions = function () {\n    var _props19 = _this7.props,\n        hideSelectedOptions = _props19.hideSelectedOptions,\n        isMulti = _props19.isMulti;\n    if (hideSelectedOptions === undefined) return isMulti;\n    return hideSelectedOptions;\n  };\n\n  this.onKeyDown = function (event) {\n    var _props20 = _this7.props,\n        isMulti = _props20.isMulti,\n        backspaceRemovesValue = _props20.backspaceRemovesValue,\n        escapeClearsValue = _props20.escapeClearsValue,\n        inputValue = _props20.inputValue,\n        isClearable = _props20.isClearable,\n        isDisabled = _props20.isDisabled,\n        menuIsOpen = _props20.menuIsOpen,\n        onKeyDown = _props20.onKeyDown,\n        tabSelectsValue = _props20.tabSelectsValue,\n        openMenuOnFocus = _props20.openMenuOnFocus;\n    var _state9 = _this7.state,\n        focusedOption = _state9.focusedOption,\n        focusedValue = _state9.focusedValue,\n        selectValue = _state9.selectValue;\n    if (isDisabled) return;\n\n    if (typeof onKeyDown === 'function') {\n      onKeyDown(event);\n\n      if (event.defaultPrevented) {\n        return;\n      }\n    } // Block option hover events when the user has just pressed a key\n\n\n    _this7.blockOptionHover = true;\n\n    switch (event.key) {\n      case 'ArrowLeft':\n        if (!isMulti || inputValue) return;\n\n        _this7.focusValue('previous');\n\n        break;\n\n      case 'ArrowRight':\n        if (!isMulti || inputValue) return;\n\n        _this7.focusValue('next');\n\n        break;\n\n      case 'Backspace':\n        if (inputValue) return;\n\n        if (focusedValue) {\n          _this7.removeValue(focusedValue);\n        } else {\n          if (!backspaceRemovesValue) return;\n\n          _this7.popValue();\n        }\n\n        break;\n\n      case 'Tab':\n        if (event.shiftKey || !menuIsOpen || !tabSelectsValue || !focusedOption || // don't capture the event if the menu opens on focus and the focused\n        // option is already selected; it breaks the flow of navigation\n        openMenuOnFocus && _this7.isOptionSelected(focusedOption, selectValue)) {\n          return;\n        }\n\n        _this7.selectOption(focusedOption);\n\n        break;\n\n      case 'Enter':\n        if (menuIsOpen) {\n          if (!focusedOption) return;\n\n          _this7.selectOption(focusedOption);\n        } else {\n          _this7.focusOption('first');\n        }\n\n        break;\n\n      case 'Escape':\n        if (menuIsOpen) {\n          _this7.inputIsHiddenAfterUpdate = false;\n\n          _this7.onInputChange('', {\n            action: 'menu-close'\n          });\n\n          _this7.onMenuClose();\n        } else if (isClearable && escapeClearsValue) {\n          _this7.clearValue();\n        }\n\n        break;\n\n      case ' ':\n        // space\n        if (inputValue) {\n          return;\n        }\n\n        if (!menuIsOpen) {\n          _this7.openMenu('first');\n\n          break;\n        }\n\n        if (!focusedOption) return;\n\n        _this7.selectOption(focusedOption);\n\n        break;\n\n      case 'ArrowUp':\n        if (menuIsOpen) {\n          _this7.focusOption('up');\n        } else {\n          _this7.openMenu('last');\n        }\n\n        break;\n\n      case 'ArrowDown':\n        if (menuIsOpen) {\n          _this7.focusOption('down');\n        } else {\n          _this7.openMenu('first');\n        }\n\n        break;\n\n      case 'PageUp':\n        if (!menuIsOpen) return;\n\n        _this7.focusOption('pageup');\n\n        break;\n\n      case 'PageDown':\n        if (!menuIsOpen) return;\n\n        _this7.focusOption('pagedown');\n\n        break;\n\n      case 'Home':\n        if (!menuIsOpen) return;\n\n        _this7.focusOption('first');\n\n        break;\n\n      case 'End':\n        if (!menuIsOpen) return;\n\n        _this7.focusOption('last');\n\n        break;\n\n      default:\n        return;\n    }\n\n    event.preventDefault();\n  };\n};\n\nexports.default = Select;","map":{"version":3,"sources":["/Users/mathew/EasyA/node_modules/react-select/lib/Select.js"],"names":["Object","defineProperty","exports","value","defaultProps","undefined","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","_i","Symbol","iterator","_s","next","done","push","length","err","Array","isArray","TypeError","_extends","assign","target","arguments","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","require","_react2","_interopRequireDefault","_filters","_index","_index2","_utils","_builtins","_index3","_primitives","_styles","obj","__esModule","default","_toConsumableArray","arr2","from","_objectWithoutProperties","keys","indexOf","_classCallCheck","instance","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","backspaceRemovesValue","blurInputOnSelect","isTouchCapable","captureMenuScroll","closeMenuOnSelect","components","controlShouldRenderValue","escapeClearsValue","filterOption","createFilter","formatGroupLabel","getOptionLabel","getOptionValue","isDisabled","isLoading","isMulti","isRtl","isSearchable","isOptionDisabled","loadingMessage","maxMenuHeight","minMenuHeight","menuIsOpen","menuPlacement","menuPosition","menuShouldBlockScroll","menuShouldScrollIntoView","isMobileDevice","noOptionsMessage","openMenuOnFocus","openMenuOnClick","options","pageSize","placeholder","screenReaderStatus","_ref","count","styles","tabIndex","tabSelectsValue","instanceId","Select","_Component","_this","getPrototypeOf","_initialiseProps","defaultComponents","instancePrefix","selectValue","cleanValue","menuOptions","buildMenuOptions","state","componentDidMount","startListeningToTouch","autoFocus","focusInput","componentWillReceiveProps","nextProps","_props","inputValue","_selectValue","_menuOptions","_focusedValue","getNextFocusedValue","_focusedOption","getNextFocusedOption","focusable","setState","focusedOption","focusedValue","inputIsHiddenAfterUpdate","inputIsHidden","componentDidUpdate","prevProps","_props2","isFocused","menuListRef","focusedOptionRef","scrollToFocusedOptionOnUpdate","scrollIntoView","componentWillUnmount","stopListeningToTouch","onMenuOpen","onMenuClose","_props3","announceAriaLiveContext","event","context","onInputChange","action","newValue","actionMeta","inputRef","focus","blurInput","blur","openMenu","focusOption","_state","openAtIndex","selectedIndex","focusValue","direction","_props4","_state2","focusedIndex","lastIndex","nextFocus","_state3","getCommonProps","clearValue","getStyles","setValue","selectOption","className","classNamePrefix","hasValue","getValue","cxPrefix","console","warn","cx","classNames","bind","selectProps","nextSelectValue","clearFocusValueOnUpdate","_state4","lastSelectValue","lastFocusedIndex","nextFocusedIndex","lastFocusedOption","hasOptions","render","countOptions","isClearable","_props5","option","isOptionSelected","_this2","candidate","some","formatOptionLabel","data","_inputValue","_selectValue2","document","addEventListener","onTouchStart","onTouchMove","onTouchEnd","removeEventListener","_this3","_props$inputValue","toOption","id","isSelected","label","shouldHideSelectedOptions","onHover","onOptionHover","onSelect","optionId","getElementId","innerProps","onClick","onMouseMove","onMouseOver","role","type","reduce","acc","item","itemIndex","hasGroups","items","children","map","child","filter","Boolean","groupId","constructAriaLiveMessage","_state5","ariaLiveContext","_props6","focusedValueMsg","valueFocusAriaMessage","focusedOptionMsg","optionFocusAriaMessage","resultsMsg","resultsAriaMessage","screenReaderMessage","renderInput","_props7","inputId","Input","createElement","DummyInput","innerRef","getInputRef","onBlur","onInputBlur","onChange","noop","onFocus","onInputFocus","readOnly","ariaAttributes","commonProps","autoCapitalize","autoComplete","autoCorrect","isHidden","handleInputChange","spellCheck","renderPlaceholderOrValue","_this4","_components","MultiValue","MultiValueContainer","MultiValueLabel","MultiValueRemove","SingleValue","Placeholder","_props8","_state6","selectValues","opt","Container","Label","Remove","removeProps","removeValue","onMouseDown","e","preventDefault","stopPropagation","singleValue","renderClearIndicator","ClearIndicator","_props9","onClearIndicatorMouseDown","onClearIndicatorTouchEnd","renderLoadingIndicator","LoadingIndicator","_props10","renderIndicatorSeparator","_components2","DropdownIndicator","IndicatorSeparator","renderDropdownIndicator","onDropdownIndicatorMouseDown","onDropdownIndicatorTouchEnd","renderMenu","_this5","_components3","Group","GroupHeading","Menu","MenuList","MenuPortal","LoadingMessage","NoOptionsMessage","Option","_state7","_props11","menuPortalTarget","onMenuScrollToTop","onMenuScrollToBottom","getFocusedOptionRef","menuUI","group","headingId","Heading","headingProps","message","_message","menuElement","onMenuMouseDown","onMenuMouseMove","ScrollCaptor","isEnabled","onTopArrive","onBottomArrive","ScrollBlock","getMenuListRef","maxHeight","appendTo","controlElement","controlRef","renderFormField","_this6","_props12","delimiter","name","_value","join","_value2","renderLiveRegion","A11yText","ariaLiveSelection","_components4","Control","IndicatorsContainer","SelectContainer","ValueContainer","_props13","onKeyDown","getControlRef","onControlMouseDown","onControlTouchEnd","Component","_this7","blockOptionHover","initialTouchX","initialTouchY","openAfterFocus","ref","_props14","_props15","_selectValue3","announceAriaLiveSelection","concat","removedValue","_props16","popValue","lastSelectedValue","slice","base","defaultStyles","boxSizing","custom","element","getActiveDescendentId","_state8","index","_ref2","valueEventAriaMessage","_ref3","instructionsAriaMessage","button","tagName","_props17","setTimeout","_ref4","_ref4$touches","touches","touch","clientX","clientY","userIsDragging","_ref5","_ref5$touches","deltaX","Math","abs","deltaY","moveThreshold","contains","currentTarget","_props18","_props19","hideSelectedOptions","_props20","_state9","defaultPrevented","shiftKey"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.defaultProps = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _filters = require('./filters');\n\nvar _index = require('./internal/index');\n\nvar _index2 = require('./accessibility/index');\n\nvar _utils = require('./utils');\n\nvar _builtins = require('./builtins');\n\nvar _index3 = require('./components/index');\n\nvar _primitives = require('./primitives');\n\nvar _styles = require('./styles');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar defaultProps = exports.defaultProps = {\n  backspaceRemovesValue: true,\n  blurInputOnSelect: (0, _utils.isTouchCapable)(),\n  captureMenuScroll: !(0, _utils.isTouchCapable)(),\n  closeMenuOnSelect: true,\n  components: {},\n  controlShouldRenderValue: true,\n  escapeClearsValue: false,\n  filterOption: (0, _filters.createFilter)(),\n  formatGroupLabel: _builtins.formatGroupLabel,\n  getOptionLabel: _builtins.getOptionLabel,\n  getOptionValue: _builtins.getOptionValue,\n  isDisabled: false,\n  isLoading: false,\n  isMulti: false,\n  isRtl: false,\n  isSearchable: true,\n  isOptionDisabled: _builtins.isOptionDisabled,\n  loadingMessage: function loadingMessage() {\n    return 'Loading...';\n  },\n  maxMenuHeight: 300,\n  minMenuHeight: 140,\n  menuIsOpen: false,\n  menuPlacement: 'bottom',\n  menuPosition: 'absolute',\n  menuShouldBlockScroll: false,\n  menuShouldScrollIntoView: !(0, _utils.isMobileDevice)(),\n  noOptionsMessage: function noOptionsMessage() {\n    return 'No options';\n  },\n  openMenuOnFocus: false,\n  openMenuOnClick: true,\n  options: [],\n  pageSize: 5,\n  placeholder: 'Select...',\n  screenReaderStatus: function screenReaderStatus(_ref) {\n    var count = _ref.count;\n    return count + ' result' + (count !== 1 ? 's' : '') + ' available';\n  },\n  styles: {},\n  tabIndex: '0',\n  tabSelectsValue: true\n};\n\nvar instanceId = 1;\n\nvar Select = function (_Component) {\n  _inherits(Select, _Component);\n\n  // Lifecycle\n  // ------------------------------\n\n  // Refs\n  // ------------------------------\n\n  // Misc. Instance Properties\n  // ------------------------------\n\n  function Select(props) {\n    _classCallCheck(this, Select);\n\n    var _this = _possibleConstructorReturn(this, (Select.__proto__ || Object.getPrototypeOf(Select)).call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var value = props.value;\n\n    _this.components = (0, _index3.defaultComponents)(props);\n    _this.instancePrefix = 'react-select-' + (_this.props.instanceId || ++instanceId);\n\n    var selectValue = (0, _utils.cleanValue)(value);\n    var menuOptions = _this.buildMenuOptions(props, selectValue);\n\n    _this.state.menuOptions = menuOptions;\n    _this.state.selectValue = selectValue;\n    return _this;\n  } // TODO\n\n\n  _createClass(Select, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.startListeningToTouch();\n\n      if (this.props.autoFocus) {\n        this.focusInput();\n      }\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var _props = this.props,\n          components = _props.components,\n          options = _props.options,\n          value = _props.value,\n          inputValue = _props.inputValue;\n      // re-cache custom components\n\n      if (nextProps.components !== components) {\n        this.components = (0, _index3.defaultComponents)(nextProps);\n      }\n      // rebuild the menu options\n      if (nextProps.value !== value || nextProps.options !== options || nextProps.inputValue !== inputValue) {\n        var _selectValue = (0, _utils.cleanValue)(nextProps.value);\n        var _menuOptions = this.buildMenuOptions(nextProps, _selectValue);\n        var _focusedValue = this.getNextFocusedValue(_selectValue);\n        var _focusedOption = this.getNextFocusedOption(_menuOptions.focusable);\n        this.setState({ menuOptions: _menuOptions, selectValue: _selectValue, focusedOption: _focusedOption, focusedValue: _focusedValue });\n      }\n      // some updates should toggle the state of the input visibility\n      if (this.inputIsHiddenAfterUpdate != null) {\n        this.setState({\n          inputIsHidden: this.inputIsHiddenAfterUpdate\n        });\n        delete this.inputIsHiddenAfterUpdate;\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      var _props2 = this.props,\n          isDisabled = _props2.isDisabled,\n          menuIsOpen = _props2.menuIsOpen;\n      var isFocused = this.state.isFocused;\n\n\n      if (\n      // ensure focus is restored correctly when the control becomes enabled\n      isFocused && !isDisabled && prevProps.isDisabled ||\n      // ensure focus is on the Input when the menu opens\n      isFocused && menuIsOpen && !prevProps.menuIsOpen) {\n        this.focusInput();\n      }\n\n      // scroll the focused option into view if necessary\n      if (this.menuListRef && this.focusedOptionRef && this.scrollToFocusedOptionOnUpdate) {\n        (0, _utils.scrollIntoView)(this.menuListRef, this.focusedOptionRef);\n      }\n      this.scrollToFocusedOptionOnUpdate = false;\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.stopListeningToTouch();\n    }\n\n    // ==============================\n    // Consumer Handlers\n    // ==============================\n\n  }, {\n    key: 'onMenuOpen',\n    value: function onMenuOpen() {\n      this.props.onMenuOpen();\n    }\n  }, {\n    key: 'onMenuClose',\n    value: function onMenuClose() {\n      var _props3 = this.props,\n          isSearchable = _props3.isSearchable,\n          isMulti = _props3.isMulti;\n\n      this.announceAriaLiveContext({ event: 'input', context: { isSearchable: isSearchable, isMulti: isMulti } });\n      this.onInputChange('', { action: 'menu-close' });\n      this.props.onMenuClose();\n    }\n  }, {\n    key: 'onInputChange',\n    value: function onInputChange(newValue, actionMeta) {\n      this.props.onInputChange(newValue, actionMeta);\n    }\n\n    // ==============================\n    // Methods\n    // ==============================\n\n  }, {\n    key: 'focusInput',\n    value: function focusInput() {\n      if (!this.inputRef) return;\n      this.inputRef.focus();\n    }\n  }, {\n    key: 'blurInput',\n    value: function blurInput() {\n      if (!this.inputRef) return;\n      this.inputRef.blur();\n    }\n\n    // aliased for consumers\n\n  }, {\n    key: 'openMenu',\n    value: function openMenu(focusOption) {\n      var _state = this.state,\n          menuOptions = _state.menuOptions,\n          selectValue = _state.selectValue;\n      var isMulti = this.props.isMulti;\n\n      var openAtIndex = focusOption === 'first' ? 0 : menuOptions.focusable.length - 1;\n\n      if (!isMulti) {\n        var selectedIndex = menuOptions.focusable.indexOf(selectValue[0]);\n        if (selectedIndex > -1) {\n          openAtIndex = selectedIndex;\n        }\n      }\n\n      this.scrollToFocusedOptionOnUpdate = true;\n      this.inputIsHiddenAfterUpdate = false;\n\n      this.onMenuOpen();\n      this.setState({\n        focusedValue: null,\n        focusedOption: menuOptions.focusable[openAtIndex]\n      });\n\n      this.announceAriaLiveContext({ event: 'menu' });\n    }\n  }, {\n    key: 'focusValue',\n    value: function focusValue(direction) {\n      var _props4 = this.props,\n          isMulti = _props4.isMulti,\n          isSearchable = _props4.isSearchable;\n      var _state2 = this.state,\n          selectValue = _state2.selectValue,\n          focusedValue = _state2.focusedValue;\n\n      // Only multiselects support value focusing\n\n      if (!isMulti) return;\n\n      this.setState({\n        focusedOption: null\n      });\n\n      var focusedIndex = selectValue.indexOf(focusedValue);\n      if (!focusedValue) {\n        focusedIndex = -1;\n        this.announceAriaLiveContext({ event: 'value' });\n      }\n\n      var lastIndex = selectValue.length - 1;\n      var nextFocus = -1;\n      if (!selectValue.length) return;\n\n      switch (direction) {\n        case 'previous':\n          if (focusedIndex === 0) {\n            // don't cycle from the start to the end\n            nextFocus = 0;\n          } else if (focusedIndex === -1) {\n            // if nothing is focused, focus the last value first\n            nextFocus = lastIndex;\n          } else {\n            nextFocus = focusedIndex - 1;\n          }\n          break;\n        case 'next':\n          if (focusedIndex > -1 && focusedIndex < lastIndex) {\n            nextFocus = focusedIndex + 1;\n          }\n          break;\n      }\n\n      if (nextFocus === -1) {\n        this.announceAriaLiveContext({ event: 'input', context: { isSearchable: isSearchable, isMulti: isMulti } });\n      }\n\n      this.setState({\n        inputIsHidden: nextFocus === -1 ? false : true,\n        focusedValue: selectValue[nextFocus]\n      });\n    }\n  }, {\n    key: 'focusOption',\n    value: function focusOption() {\n      var direction = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'first';\n      var pageSize = this.props.pageSize;\n      var _state3 = this.state,\n          focusedOption = _state3.focusedOption,\n          menuOptions = _state3.menuOptions;\n\n      var options = menuOptions.focusable;\n\n      if (!options.length) return;\n      var nextFocus = 0; // handles 'first'\n      var focusedIndex = options.indexOf(focusedOption);\n      if (!focusedOption) {\n        focusedIndex = -1;\n        this.announceAriaLiveContext({ event: 'menu' });\n      }\n\n      if (direction === 'up') {\n        nextFocus = focusedIndex > 0 ? focusedIndex - 1 : options.length - 1;\n      } else if (direction === 'down') {\n        nextFocus = (focusedIndex + 1) % options.length;\n      } else if (direction === 'pageup') {\n        nextFocus = focusedIndex - pageSize;\n        if (nextFocus < 0) nextFocus = 0;\n      } else if (direction === 'pagedown') {\n        nextFocus = focusedIndex + pageSize;\n        if (nextFocus > options.length - 1) nextFocus = options.length - 1;\n      } else if (direction === 'last') {\n        nextFocus = options.length - 1;\n      }\n      this.scrollToFocusedOptionOnUpdate = true;\n      this.setState({\n        focusedOption: options[nextFocus],\n        focusedValue: null\n      });\n    }\n  }, {\n    key: 'getCommonProps',\n\n\n    // ==============================\n    // Getters\n    // ==============================\n\n    value: function getCommonProps() {\n      var clearValue = this.clearValue,\n          getStyles = this.getStyles,\n          setValue = this.setValue,\n          selectOption = this.selectOption,\n          props = this.props;\n      var className = props.className,\n          classNamePrefix = props.classNamePrefix,\n          isMulti = props.isMulti,\n          isRtl = props.isRtl,\n          options = props.options;\n      var selectValue = this.state.selectValue;\n\n      var hasValue = this.hasValue();\n      var getValue = function getValue() {\n        return selectValue;\n      };\n      var cxPrefix = classNamePrefix;\n      if (className && classNamePrefix === undefined) {\n        console.warn('\\n        Warning: the behaviour of \\'className\\' has changed between 2.0.0-beta.2 and 2.0.0-beta.3.\\n        You can now use className to specify the class name of the outer container, and classNamePrefix to enable our provided BEM class names for internal elements.\\n        The className prop will have no effect on internal elements when 2.0.0 is released.\\n      ');\n        cxPrefix = className;\n      }\n\n      var cx = _utils.classNames.bind(null, cxPrefix);\n      return {\n        cx: cx,\n        clearValue: clearValue,\n        getStyles: getStyles,\n        getValue: getValue,\n        hasValue: hasValue,\n        isMulti: isMulti,\n        isRtl: isRtl,\n        options: options,\n        selectOption: selectOption,\n        setValue: setValue,\n        selectProps: props\n      };\n    }\n  }, {\n    key: 'getNextFocusedValue',\n    value: function getNextFocusedValue(nextSelectValue) {\n      if (this.clearFocusValueOnUpdate) {\n        this.clearFocusValueOnUpdate = false;\n        return null;\n      }\n      var _state4 = this.state,\n          focusedValue = _state4.focusedValue,\n          lastSelectValue = _state4.selectValue;\n\n      var lastFocusedIndex = lastSelectValue.indexOf(focusedValue);\n      if (lastFocusedIndex > -1) {\n        var nextFocusedIndex = nextSelectValue.indexOf(focusedValue);\n        if (nextFocusedIndex > -1) {\n          // the focused value is still in the selectValue, return it\n          return focusedValue;\n        } else if (lastFocusedIndex < nextSelectValue.length) {\n          // the focusedValue is not present in the next selectValue array by\n          // reference, so return the new value at the same index\n          return nextSelectValue[lastFocusedIndex];\n        }\n      }\n      return null;\n    }\n  }, {\n    key: 'getNextFocusedOption',\n    value: function getNextFocusedOption(options) {\n      var lastFocusedOption = this.state.focusedOption;\n\n      return lastFocusedOption && options.indexOf(lastFocusedOption) > -1 ? lastFocusedOption : options[0];\n    }\n\n    // ==============================\n    // Helpers\n    // ==============================\n\n  }, {\n    key: 'hasValue',\n    value: function hasValue() {\n      var selectValue = this.state.selectValue;\n\n      return selectValue.length > 0;\n    }\n  }, {\n    key: 'hasOptions',\n    value: function hasOptions() {\n      return !!this.state.menuOptions.render.length;\n    }\n  }, {\n    key: 'countOptions',\n    value: function countOptions() {\n      return this.state.menuOptions.focusable.length;\n    }\n  }, {\n    key: 'isClearable',\n    value: function isClearable() {\n      var _props5 = this.props,\n          isClearable = _props5.isClearable,\n          isMulti = _props5.isMulti;\n\n      // single select, by default, IS NOT clearable\n      // multi select, by default, IS clearable\n\n      if (isClearable === undefined) return isMulti;\n\n      return isClearable;\n    }\n  }, {\n    key: 'isOptionDisabled',\n    value: function isOptionDisabled(option) {\n      return typeof this.props.isOptionDisabled === 'function' ? this.props.isOptionDisabled(option) : false;\n    }\n  }, {\n    key: 'isOptionSelected',\n    value: function isOptionSelected(option, selectValue) {\n      var _this2 = this;\n\n      if (selectValue.indexOf(option) > -1) return true;\n      if (typeof this.props.isOptionSelected === 'function') {\n        return this.props.isOptionSelected(option, selectValue);\n      }\n      var candidate = this.getOptionValue(option);\n      return selectValue.some(function (i) {\n        return _this2.getOptionValue(i) === candidate;\n      });\n    }\n  }, {\n    key: 'filterOption',\n    value: function filterOption(option, inputValue) {\n      return this.props.filterOption ? this.props.filterOption(option, inputValue) : true;\n    }\n  }, {\n    key: 'formatOptionLabel',\n    value: function formatOptionLabel(data, context) {\n      if (typeof this.props.formatOptionLabel === 'function') {\n        var _inputValue = this.props.inputValue;\n        var _selectValue2 = this.state.selectValue;\n\n        return this.props.formatOptionLabel(data, {\n          context: context,\n          inputValue: _inputValue,\n          selectValue: _selectValue2\n        });\n      } else {\n        return this.getOptionLabel(data);\n      }\n    }\n  }, {\n    key: 'formatGroupLabel',\n    value: function formatGroupLabel(data) {\n      return this.props.formatGroupLabel(data);\n    }\n\n    // ==============================\n    // Mouse Handlers\n    // ==============================\n\n  }, {\n    key: 'startListeningToTouch',\n\n\n    // ==============================\n    // Touch Handlers\n    // ==============================\n\n    value: function startListeningToTouch() {\n      if (document && document.addEventListener) {\n        document.addEventListener('touchstart', this.onTouchStart, false);\n        document.addEventListener('touchmove', this.onTouchMove, false);\n        document.addEventListener('touchend', this.onTouchEnd, false);\n      }\n    }\n  }, {\n    key: 'stopListeningToTouch',\n    value: function stopListeningToTouch() {\n      if (document && document.removeEventListener) {\n        document.removeEventListener('touchstart', this.onTouchStart);\n        document.removeEventListener('touchmove', this.onTouchMove);\n        document.removeEventListener('touchend', this.onTouchEnd);\n      }\n    }\n\n    // ==============================\n    // Focus Handlers\n    // ==============================\n\n    // ==============================\n    // Keyboard Handlers\n    // ==============================\n\n  }, {\n    key: 'buildMenuOptions',\n\n\n    // ==============================\n    // Menu Options\n    // ==============================\n\n    value: function buildMenuOptions(props, selectValue) {\n      var _this3 = this;\n\n      var _props$inputValue = props.inputValue,\n          inputValue = _props$inputValue === undefined ? '' : _props$inputValue,\n          options = props.options;\n\n\n      var toOption = function toOption(option, id) {\n        var isDisabled = _this3.isOptionDisabled(option);\n        var isSelected = _this3.isOptionSelected(option, selectValue);\n        var label = _this3.getOptionLabel(option);\n        var value = _this3.getOptionValue(option);\n\n        if (_this3.shouldHideSelectedOptions() && isSelected || !_this3.filterOption({ label: label, value: value, data: option }, inputValue)) {\n          return;\n        }\n\n        var onHover = isDisabled ? undefined : function () {\n          return _this3.onOptionHover(option);\n        };\n        var onSelect = isDisabled ? undefined : function () {\n          return _this3.selectOption(option);\n        };\n        var optionId = _this3.getElementId('option') + '-' + id;\n\n        return {\n          innerProps: {\n            id: optionId,\n            onClick: onSelect,\n            onMouseMove: onHover,\n            onMouseOver: onHover,\n            role: 'option',\n            tabIndex: -1\n          },\n          data: option,\n          isDisabled: isDisabled,\n          isSelected: isSelected,\n          key: optionId,\n          label: label,\n          type: 'option',\n          value: value\n        };\n      };\n\n      return options.reduce(function (acc, item, itemIndex) {\n        if (item.options) {\n          // TODO needs a tidier implementation\n          if (!_this3.hasGroups) _this3.hasGroups = true;\n\n          var items = item.options;\n\n          var children = items.map(function (child, i) {\n            var option = toOption(child, itemIndex + '-' + i);\n            if (option && !option.isDisabled) acc.focusable.push(child);\n            return option;\n          }).filter(Boolean);\n          if (children.length) {\n            var groupId = _this3.getElementId('group') + '-' + itemIndex;\n            acc.render.push({\n              type: 'group',\n              key: groupId,\n              data: item,\n              options: children\n            });\n          }\n        } else {\n          var option = toOption(item, '' + itemIndex);\n          if (option) {\n            acc.render.push(option);\n            if (!option.isDisabled) acc.focusable.push(item);\n          }\n        }\n        return acc;\n      }, { render: [], focusable: [] });\n    }\n\n    // ==============================\n    // Renderers\n    // ==============================\n\n  }, {\n    key: 'constructAriaLiveMessage',\n    value: function constructAriaLiveMessage() {\n      var _state5 = this.state,\n          ariaLiveContext = _state5.ariaLiveContext,\n          selectValue = _state5.selectValue,\n          focusedValue = _state5.focusedValue,\n          focusedOption = _state5.focusedOption;\n      var _props6 = this.props,\n          options = _props6.options,\n          menuIsOpen = _props6.menuIsOpen,\n          inputValue = _props6.inputValue,\n          screenReaderStatus = _props6.screenReaderStatus;\n\n      // An aria live message representing the currently focused value in the select.\n\n      var focusedValueMsg = focusedValue ? (0, _index2.valueFocusAriaMessage)({ focusedValue: focusedValue, getOptionLabel: this.getOptionLabel, selectValue: selectValue }) : '';\n      // An aria live message representing the currently focused option in the select.\n      var focusedOptionMsg = focusedOption && menuIsOpen ? (0, _index2.optionFocusAriaMessage)({ focusedOption: focusedOption, getOptionLabel: this.getOptionLabel, options: options }) : '';\n      // An aria live message representing the set of focusable results and current searchterm/inputvalue.\n      var resultsMsg = (0, _index2.resultsAriaMessage)({ inputValue: inputValue, screenReaderMessage: screenReaderStatus({ count: this.countOptions() }) });\n\n      return focusedValueMsg + ' ' + focusedOptionMsg + ' ' + resultsMsg + ' ' + ariaLiveContext;\n    }\n  }, {\n    key: 'renderInput',\n    value: function renderInput() {\n      var _props7 = this.props,\n          isDisabled = _props7.isDisabled,\n          isSearchable = _props7.isSearchable,\n          inputId = _props7.inputId,\n          inputValue = _props7.inputValue,\n          tabIndex = _props7.tabIndex;\n      var Input = this.components.Input;\n      var inputIsHidden = this.state.inputIsHidden;\n\n\n      var id = inputId || this.getElementId('input');\n\n      if (!isSearchable) {\n        // use a dummy input to maintain focus/blur functionality\n        return _react2.default.createElement(_index.DummyInput, {\n          id: id,\n          innerRef: this.getInputRef,\n          onBlur: this.onInputBlur,\n          onChange: _utils.noop,\n          onFocus: this.onInputFocus,\n          readOnly: true,\n          tabIndex: tabIndex,\n          value: ''\n        });\n      }\n\n      // aria attributes makes the JSX \"noisy\", separated for clarity\n      var ariaAttributes = {\n        'aria-autocomplete': 'list',\n        'aria-label': this.props['aria-label'],\n        'aria-labelledby': this.props['aria-labelledby']\n      };\n\n      var cx = this.commonProps.cx;\n\n\n      return _react2.default.createElement(Input, _extends({\n        autoCapitalize: 'none',\n        autoComplete: 'off',\n        autoCorrect: 'off',\n        cx: cx,\n        getStyles: this.getStyles,\n        id: id,\n        innerRef: this.getInputRef,\n        isDisabled: isDisabled,\n        isHidden: inputIsHidden,\n        onBlur: this.onInputBlur,\n        onChange: this.handleInputChange,\n        onFocus: this.onInputFocus,\n        spellCheck: 'false',\n        tabIndex: tabIndex,\n        type: 'text',\n        value: inputValue\n      }, ariaAttributes));\n    }\n  }, {\n    key: 'renderPlaceholderOrValue',\n    value: function renderPlaceholderOrValue() {\n      var _this4 = this;\n\n      var _components = this.components,\n          MultiValue = _components.MultiValue,\n          MultiValueContainer = _components.MultiValueContainer,\n          MultiValueLabel = _components.MultiValueLabel,\n          MultiValueRemove = _components.MultiValueRemove,\n          SingleValue = _components.SingleValue,\n          Placeholder = _components.Placeholder;\n      var commonProps = this.commonProps;\n      var _props8 = this.props,\n          controlShouldRenderValue = _props8.controlShouldRenderValue,\n          isDisabled = _props8.isDisabled,\n          isMulti = _props8.isMulti,\n          inputValue = _props8.inputValue,\n          placeholder = _props8.placeholder;\n      var _state6 = this.state,\n          selectValue = _state6.selectValue,\n          focusedValue = _state6.focusedValue;\n\n\n      if (!this.hasValue() || !controlShouldRenderValue) {\n        return inputValue ? null : _react2.default.createElement(\n          Placeholder,\n          _extends({}, commonProps, { key: 'placeholder', isDisabled: isDisabled }),\n          placeholder\n        );\n      }\n\n      if (isMulti) {\n        var selectValues = selectValue.map(function (opt) {\n          var isFocused = opt === focusedValue;\n          return _react2.default.createElement(\n            MultiValue,\n            _extends({}, commonProps, {\n              components: {\n                Container: MultiValueContainer,\n                Label: MultiValueLabel,\n                Remove: MultiValueRemove\n              },\n              isFocused: isFocused,\n              isDisabled: isDisabled,\n              key: _this4.getOptionValue(opt),\n              removeProps: {\n                onClick: function onClick() {\n                  return _this4.removeValue(opt);\n                },\n                onTouchEnd: function onTouchEnd() {\n                  return _this4.removeValue(opt);\n                },\n                onMouseDown: function onMouseDown(e) {\n                  e.preventDefault();\n                  e.stopPropagation();\n                }\n              },\n              data: opt\n            }),\n            _this4.formatOptionLabel(opt, 'value')\n          );\n        });\n        return selectValues;\n      }\n\n      if (inputValue) {\n        return null;\n      }\n\n      var singleValue = selectValue[0];\n      return _react2.default.createElement(\n        SingleValue,\n        _extends({}, commonProps, { data: singleValue, isDisabled: isDisabled }),\n        this.formatOptionLabel(singleValue, 'value')\n      );\n    }\n  }, {\n    key: 'renderClearIndicator',\n    value: function renderClearIndicator() {\n      var ClearIndicator = this.components.ClearIndicator;\n      var commonProps = this.commonProps;\n      var _props9 = this.props,\n          isDisabled = _props9.isDisabled,\n          isLoading = _props9.isLoading;\n      var isFocused = this.state.isFocused;\n\n\n      if (!this.isClearable() || !ClearIndicator || isDisabled || !this.hasValue() || isLoading) {\n        return null;\n      }\n\n      var innerProps = {\n        onMouseDown: this.onClearIndicatorMouseDown,\n        onTouchEnd: this.onClearIndicatorTouchEnd,\n        'aria-hidden': 'true'\n      };\n\n      return _react2.default.createElement(ClearIndicator, _extends({}, commonProps, {\n        innerProps: innerProps,\n        isFocused: isFocused\n      }));\n    }\n  }, {\n    key: 'renderLoadingIndicator',\n    value: function renderLoadingIndicator() {\n      var LoadingIndicator = this.components.LoadingIndicator;\n      var commonProps = this.commonProps;\n      var _props10 = this.props,\n          isDisabled = _props10.isDisabled,\n          isLoading = _props10.isLoading;\n      var isFocused = this.state.isFocused;\n\n\n      if (!LoadingIndicator || !isLoading) return null;\n\n      var innerProps = { 'aria-hidden': 'true' };\n      return _react2.default.createElement(LoadingIndicator, _extends({}, commonProps, {\n        innerProps: innerProps,\n        isDisabled: isDisabled,\n        isFocused: isFocused\n      }));\n    }\n  }, {\n    key: 'renderIndicatorSeparator',\n    value: function renderIndicatorSeparator() {\n      var _components2 = this.components,\n          DropdownIndicator = _components2.DropdownIndicator,\n          IndicatorSeparator = _components2.IndicatorSeparator;\n\n      // separator doesn't make sense without the dropdown indicator\n\n      if (!DropdownIndicator || !IndicatorSeparator) return null;\n\n      var commonProps = this.commonProps;\n      var isDisabled = this.props.isDisabled;\n      var isFocused = this.state.isFocused;\n\n\n      return _react2.default.createElement(IndicatorSeparator, _extends({}, commonProps, {\n        isDisabled: isDisabled,\n        isFocused: isFocused\n      }));\n    }\n  }, {\n    key: 'renderDropdownIndicator',\n    value: function renderDropdownIndicator() {\n      var DropdownIndicator = this.components.DropdownIndicator;\n\n      if (!DropdownIndicator) return null;\n      var commonProps = this.commonProps;\n      var isDisabled = this.props.isDisabled;\n      var isFocused = this.state.isFocused;\n\n\n      var innerProps = {\n        onMouseDown: this.onDropdownIndicatorMouseDown,\n        onTouchEnd: this.onDropdownIndicatorTouchEnd,\n        'aria-hidden': 'true'\n      };\n\n      return _react2.default.createElement(DropdownIndicator, _extends({}, commonProps, {\n        innerProps: innerProps,\n        isDisabled: isDisabled,\n        isFocused: isFocused\n      }));\n    }\n  }, {\n    key: 'renderMenu',\n    value: function renderMenu() {\n      var _this5 = this;\n\n      var _components3 = this.components,\n          Group = _components3.Group,\n          GroupHeading = _components3.GroupHeading,\n          Menu = _components3.Menu,\n          MenuList = _components3.MenuList,\n          MenuPortal = _components3.MenuPortal,\n          LoadingMessage = _components3.LoadingMessage,\n          NoOptionsMessage = _components3.NoOptionsMessage,\n          Option = _components3.Option;\n      var commonProps = this.commonProps;\n      var _state7 = this.state,\n          focusedOption = _state7.focusedOption,\n          menuOptions = _state7.menuOptions;\n      var _props11 = this.props,\n          captureMenuScroll = _props11.captureMenuScroll,\n          inputValue = _props11.inputValue,\n          isLoading = _props11.isLoading,\n          loadingMessage = _props11.loadingMessage,\n          minMenuHeight = _props11.minMenuHeight,\n          maxMenuHeight = _props11.maxMenuHeight,\n          menuIsOpen = _props11.menuIsOpen,\n          menuPlacement = _props11.menuPlacement,\n          menuPosition = _props11.menuPosition,\n          menuPortalTarget = _props11.menuPortalTarget,\n          menuShouldBlockScroll = _props11.menuShouldBlockScroll,\n          menuShouldScrollIntoView = _props11.menuShouldScrollIntoView,\n          noOptionsMessage = _props11.noOptionsMessage,\n          onMenuScrollToTop = _props11.onMenuScrollToTop,\n          onMenuScrollToBottom = _props11.onMenuScrollToBottom;\n\n\n      if (!menuIsOpen) return null;\n\n      // TODO: Internal Option Type here\n      var render = function render(props) {\n        // for performance, the menu options in state aren't changed when the\n        // focused option changes so we calculate additional props based on that\n        var isFocused = focusedOption === props.data;\n        props.innerProps.innerRef = isFocused ? _this5.getFocusedOptionRef : undefined;\n\n        return _react2.default.createElement(\n          Option,\n          _extends({}, commonProps, props, { isFocused: isFocused }),\n          _this5.formatOptionLabel(props.data, 'menu')\n        );\n      };\n\n      var menuUI = void 0;\n\n      if (this.hasOptions()) {\n        menuUI = menuOptions.render.map(function (item) {\n          if (item.type === 'group') {\n            var type = item.type,\n                group = _objectWithoutProperties(item, ['type']);\n\n            var headingId = item.key + '-heading';\n\n            return _react2.default.createElement(\n              Group,\n              _extends({}, commonProps, group, {\n                Heading: GroupHeading,\n                headingProps: {\n                  id: headingId\n                },\n                label: _this5.formatGroupLabel(item.data)\n              }),\n              item.options.map(function (option) {\n                return render(option);\n              })\n            );\n          } else if (item.type === 'option') {\n            return render(item);\n          }\n        });\n      } else if (isLoading) {\n        var message = loadingMessage({ inputValue: inputValue });\n        if (message === null) return null;\n        menuUI = _react2.default.createElement(\n          LoadingMessage,\n          commonProps,\n          message\n        );\n      } else {\n        var _message = noOptionsMessage({ inputValue: inputValue });\n        if (_message === null) return null;\n        menuUI = _react2.default.createElement(\n          NoOptionsMessage,\n          commonProps,\n          _message\n        );\n      }\n\n      var menuElement = _react2.default.createElement(\n        'div',\n        null,\n        _react2.default.createElement(\n          Menu,\n          _extends({}, commonProps, {\n            innerProps: {\n              onMouseDown: this.onMenuMouseDown,\n              onMouseMove: this.onMenuMouseMove\n            },\n            isLoading: isLoading,\n            minMenuHeight: minMenuHeight,\n            maxMenuHeight: maxMenuHeight,\n            menuPlacement: menuPlacement,\n            menuPosition: menuPosition,\n            menuShouldScrollIntoView: menuShouldScrollIntoView\n          }),\n          _react2.default.createElement(\n            _index.ScrollCaptor,\n            {\n              isEnabled: captureMenuScroll,\n              onTopArrive: onMenuScrollToTop,\n              onBottomArrive: onMenuScrollToBottom\n            },\n            _react2.default.createElement(\n              _index.ScrollBlock,\n              { isEnabled: menuShouldBlockScroll },\n              _react2.default.createElement(\n                MenuList,\n                _extends({}, commonProps, {\n                  innerProps: {\n                    innerRef: this.getMenuListRef\n                  },\n                  isLoading: isLoading,\n                  maxHeight: maxMenuHeight\n                }),\n                menuUI\n              )\n            )\n          )\n        )\n      );\n\n      // positioning behaviour is almost identical for portalled and fixed,\n      // so we use the same component. the actual portalling logic is forked\n      // within the component based on `menuPosition`\n      return menuPortalTarget || menuPosition === 'fixed' ? _react2.default.createElement(\n        MenuPortal,\n        _extends({}, commonProps, {\n          appendTo: menuPortalTarget,\n          controlElement: this.controlRef,\n          menuPlacement: menuPlacement,\n          menuPosition: menuPosition\n        }),\n        menuElement\n      ) : menuElement;\n    }\n  }, {\n    key: 'renderFormField',\n    value: function renderFormField() {\n      var _this6 = this;\n\n      var _props12 = this.props,\n          delimiter = _props12.delimiter,\n          isDisabled = _props12.isDisabled,\n          isMulti = _props12.isMulti,\n          name = _props12.name;\n      var selectValue = this.state.selectValue;\n\n\n      if (!name || isDisabled) return;\n\n      if (isMulti) {\n        if (delimiter) {\n          var _value = selectValue.map(function (opt) {\n            return _this6.getOptionValue(opt);\n          }).join(delimiter);\n          return _react2.default.createElement('input', { name: name, type: 'hidden', value: _value });\n        } else {\n          return _react2.default.createElement(\n            'div',\n            null,\n            selectValue.map(function (opt, i) {\n              return _react2.default.createElement('input', {\n                key: 'i-' + i,\n                name: name,\n                type: 'hidden',\n                value: _this6.getOptionValue(opt)\n              });\n            })\n          );\n        }\n      } else {\n        var _value2 = selectValue[0] ? this.getOptionValue(selectValue[0]) : '';\n        return _react2.default.createElement('input', { name: name, type: 'hidden', value: _value2 });\n      }\n    }\n  }, {\n    key: 'renderLiveRegion',\n    value: function renderLiveRegion() {\n      if (!this.state.isFocused) return null;\n      return _react2.default.createElement(\n        _primitives.A11yText,\n        { 'aria-live': 'assertive' },\n        _react2.default.createElement(\n          'p',\n          { id: 'aria-selection-event' },\n          '\\xA0',\n          this.state.ariaLiveSelection\n        ),\n        _react2.default.createElement(\n          'p',\n          { id: 'aria-context' },\n          '\\xA0',\n          this.constructAriaLiveMessage()\n        )\n      );\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _components4 = this.components,\n          Control = _components4.Control,\n          IndicatorsContainer = _components4.IndicatorsContainer,\n          SelectContainer = _components4.SelectContainer,\n          ValueContainer = _components4.ValueContainer;\n      var _props13 = this.props,\n          className = _props13.className,\n          id = _props13.id,\n          isDisabled = _props13.isDisabled;\n      var isFocused = this.state.isFocused;\n\n\n      var commonProps = this.commonProps = this.getCommonProps();\n\n      return _react2.default.createElement(\n        SelectContainer,\n        _extends({}, commonProps, {\n          className: className,\n          innerProps: {\n            id: id,\n            onKeyDown: this.onKeyDown\n          },\n          isDisabled: isDisabled,\n          isFocused: isFocused\n        }),\n        this.renderLiveRegion(),\n        _react2.default.createElement(\n          Control,\n          _extends({}, commonProps, {\n            innerProps: {\n              innerRef: this.getControlRef,\n              onMouseDown: this.onControlMouseDown,\n              onTouchEnd: this.onControlTouchEnd\n            },\n            isDisabled: isDisabled,\n            isFocused: isFocused\n          }),\n          _react2.default.createElement(\n            ValueContainer,\n            _extends({}, commonProps, { isDisabled: isDisabled }),\n            this.renderPlaceholderOrValue(),\n            this.renderInput()\n          ),\n          _react2.default.createElement(\n            IndicatorsContainer,\n            _extends({}, commonProps, { isDisabled: isDisabled }),\n            this.renderClearIndicator(),\n            this.renderLoadingIndicator(),\n            this.renderIndicatorSeparator(),\n            this.renderDropdownIndicator()\n          )\n        ),\n        this.renderMenu(),\n        this.renderFormField()\n      );\n    }\n  }]);\n\n  return Select;\n}(_react.Component);\n\nSelect.defaultProps = defaultProps;\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this7 = this;\n\n  this.state = {\n    ariaLiveSelection: '',\n    ariaLiveContext: '',\n    focusedOption: null,\n    focusedValue: null,\n    inputIsHidden: false,\n    isFocused: false,\n    menuOptions: { render: [], focusable: [] },\n    selectValue: []\n  };\n  this.blockOptionHover = false;\n  this.clearFocusValueOnUpdate = false;\n  this.hasGroups = false;\n  this.initialTouchX = 0;\n  this.initialTouchY = 0;\n  this.instancePrefix = '';\n  this.openAfterFocus = false;\n  this.scrollToFocusedOptionOnUpdate = false;\n  this.controlRef = null;\n\n  this.getControlRef = function (ref) {\n    _this7.controlRef = ref;\n  };\n\n  this.focusedOptionRef = null;\n\n  this.getFocusedOptionRef = function (ref) {\n    _this7.focusedOptionRef = ref;\n  };\n\n  this.menuListRef = null;\n\n  this.getMenuListRef = function (ref) {\n    _this7.menuListRef = ref;\n  };\n\n  this.inputRef = null;\n\n  this.getInputRef = function (ref) {\n    _this7.inputRef = ref;\n  };\n\n  this.focus = this.focusInput;\n  this.blur = this.blurInput;\n\n  this.setValue = function (newValue) {\n    var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'set-value';\n    var option = arguments[2];\n    var _props14 = _this7.props,\n        closeMenuOnSelect = _props14.closeMenuOnSelect,\n        isMulti = _props14.isMulti,\n        onChange = _props14.onChange;\n\n    _this7.onInputChange('', { action: 'set-value' });\n    if (closeMenuOnSelect) {\n      _this7.inputIsHiddenAfterUpdate = !isMulti;\n      _this7.onMenuClose();\n    }\n    // when the select value should change, we should reset focusedValue\n    _this7.clearFocusValueOnUpdate = true;\n    onChange(newValue, { action: action, option: option });\n  };\n\n  this.selectOption = function (newValue) {\n    var _props15 = _this7.props,\n        blurInputOnSelect = _props15.blurInputOnSelect,\n        isMulti = _props15.isMulti;\n\n\n    if (isMulti) {\n      var _selectValue3 = _this7.state.selectValue;\n\n      if (_this7.isOptionSelected(newValue, _selectValue3)) {\n        var candidate = _this7.getOptionValue(newValue);\n        _this7.setValue(_selectValue3.filter(function (i) {\n          return _this7.getOptionValue(i) !== candidate;\n        }), 'deselect-option', newValue);\n        _this7.announceAriaLiveSelection({ event: 'deselect-option', context: { value: _this7.getOptionLabel(newValue) } });\n      } else {\n\n        _this7.setValue([].concat(_toConsumableArray(_selectValue3), [newValue]), 'select-option', newValue);\n        _this7.announceAriaLiveSelection({ event: 'select-option', context: { value: _this7.getOptionLabel(newValue) } });\n      }\n    } else {\n      _this7.setValue(newValue, 'select-option');\n      _this7.announceAriaLiveSelection({ event: 'select-option', context: { value: _this7.getOptionLabel(newValue) } });\n    }\n\n    if (blurInputOnSelect) {\n      _this7.blurInput();\n    }\n  };\n\n  this.removeValue = function (removedValue) {\n    var onChange = _this7.props.onChange;\n    var selectValue = _this7.state.selectValue;\n\n    var candidate = _this7.getOptionValue(removedValue);\n    onChange(selectValue.filter(function (i) {\n      return _this7.getOptionValue(i) !== candidate;\n    }), {\n      action: 'remove-value',\n      removedValue: removedValue\n    });\n    _this7.announceAriaLiveSelection({ event: 'remove-value', context: { value: removedValue ? _this7.getOptionLabel(removedValue) : undefined } });\n    _this7.focusInput();\n  };\n\n  this.clearValue = function () {\n    var _props16 = _this7.props,\n        isMulti = _props16.isMulti,\n        onChange = _props16.onChange;\n\n    onChange(isMulti ? [] : null, { action: 'clear' });\n  };\n\n  this.popValue = function () {\n    var onChange = _this7.props.onChange;\n    var selectValue = _this7.state.selectValue;\n\n    var lastSelectedValue = selectValue[selectValue.length - 1];\n    _this7.announceAriaLiveSelection({ event: 'pop-value', context: { value: lastSelectedValue ? _this7.getOptionLabel(lastSelectedValue) : undefined } });\n    onChange(selectValue.slice(0, selectValue.length - 1), {\n      action: 'pop-value',\n      removedValue: lastSelectedValue\n    });\n  };\n\n  this.getOptionLabel = function (data) {\n    return _this7.props.getOptionLabel(data);\n  };\n\n  this.getOptionValue = function (data) {\n    return _this7.props.getOptionValue(data);\n  };\n\n  this.getStyles = function (key, props) {\n    var base = _styles.defaultStyles[key](props);\n    base.boxSizing = 'border-box';\n    var custom = _this7.props.styles[key];\n    return custom ? custom(base, props) : base;\n  };\n\n  this.getElementId = function (element) {\n    return _this7.instancePrefix + '-' + element;\n  };\n\n  this.getActiveDescendentId = function () {\n    var menuIsOpen = _this7.props.menuIsOpen;\n    var _state8 = _this7.state,\n        menuOptions = _state8.menuOptions,\n        focusedOption = _state8.focusedOption;\n\n\n    if (!focusedOption || !menuIsOpen) return undefined;\n\n    var index = menuOptions.focusable.indexOf(focusedOption);\n    var option = menuOptions.render[index];\n\n    return option && option.key;\n  };\n\n  this.announceAriaLiveSelection = function (_ref2) {\n    var event = _ref2.event,\n        context = _ref2.context;\n\n    _this7.setState({\n      ariaLiveSelection: (0, _index2.valueEventAriaMessage)(event, context)\n    });\n  };\n\n  this.announceAriaLiveContext = function (_ref3) {\n    var event = _ref3.event,\n        context = _ref3.context;\n\n    _this7.setState({\n      ariaLiveContext: (0, _index2.instructionsAriaMessage)(event, _extends({}, context, { label: _this7.props['aria-label'] }))\n    });\n  };\n\n  this.onMenuMouseDown = function (event) {\n    if (event.button !== 0) {\n      return;\n    }\n    event.stopPropagation();\n    event.preventDefault();\n    _this7.focusInput();\n  };\n\n  this.onMenuMouseMove = function (event) {\n    _this7.blockOptionHover = false;\n  };\n\n  this.onControlMouseDown = function (event) {\n    var openMenuOnClick = _this7.props.openMenuOnClick;\n\n    if (!_this7.state.isFocused) {\n      if (openMenuOnClick) {\n        _this7.openAfterFocus = true;\n      }\n      _this7.focusInput();\n    } else if (!_this7.props.menuIsOpen) {\n      _this7.openMenu('first');\n    } else {\n      _this7.onMenuClose();\n    }\n    // $FlowFixMe HTMLElement type does not have tagName property\n    if (event.target.tagName !== 'INPUT') {\n      event.preventDefault();\n    }\n  };\n\n  this.onDropdownIndicatorMouseDown = function (event) {\n    // ignore mouse events that weren't triggered by the primary button\n    if (event && event.type === 'mousedown' && event.button !== 0) {\n      return;\n    }\n    if (_this7.props.isDisabled) return;\n    var _props17 = _this7.props,\n        isMulti = _props17.isMulti,\n        menuIsOpen = _props17.menuIsOpen;\n\n    _this7.focusInput();\n    if (menuIsOpen) {\n      _this7.inputIsHiddenAfterUpdate = !isMulti;\n      _this7.onMenuClose();\n    } else {\n      _this7.openMenu('first');\n    }\n    event.preventDefault();\n    event.stopPropagation();\n  };\n\n  this.onClearIndicatorMouseDown = function (event) {\n    // ignore mouse events that weren't triggered by the primary button\n    if (event && event.type === 'mousedown' && event.button !== 0) {\n      return;\n    }\n    _this7.clearValue();\n    event.stopPropagation();\n    _this7.openAfterFocus = false;\n    setTimeout(function () {\n      return _this7.focusInput();\n    });\n  };\n\n  this.onTouchStart = function (_ref4) {\n    var _ref4$touches = _slicedToArray(_ref4.touches, 1),\n        touch = _ref4$touches[0];\n\n    _this7.initialTouchX = touch.clientX;\n    _this7.initialTouchY = touch.clientY;\n    _this7.userIsDragging = false;\n  };\n\n  this.onTouchMove = function (_ref5) {\n    var _ref5$touches = _slicedToArray(_ref5.touches, 1),\n        touch = _ref5$touches[0];\n\n    var deltaX = Math.abs(touch.clientX - _this7.initialTouchX);\n    var deltaY = Math.abs(touch.clientY - _this7.initialTouchY);\n    var moveThreshold = 5;\n\n    _this7.userIsDragging = deltaX > moveThreshold || deltaY > moveThreshold;\n  };\n\n  this.onTouchEnd = function (event) {\n    if (_this7.userIsDragging) return;\n\n    // type cast the EventTarget\n    var target = event.target;\n\n    // close the menu if the user taps outside\n    if (_this7.controlRef && !_this7.controlRef.contains(target) && _this7.menuListRef && !_this7.menuListRef.contains(target)) {\n      _this7.blurInput();\n    }\n\n    // reset move vars\n    _this7.initialTouchX = 0;\n    _this7.initialTouchY = 0;\n  };\n\n  this.onControlTouchEnd = function (event) {\n    if (_this7.userIsDragging) return;\n\n    _this7.onControlMouseDown(event);\n  };\n\n  this.onClearIndicatorTouchEnd = function (event) {\n    if (_this7.userIsDragging) return;\n\n    _this7.onClearIndicatorMouseDown(event);\n  };\n\n  this.onDropdownIndicatorTouchEnd = function (event) {\n    if (_this7.userIsDragging) return;\n\n    _this7.onDropdownIndicatorMouseDown(event);\n  };\n\n  this.handleInputChange = function (event) {\n    var inputValue = event.currentTarget.value;\n    _this7.inputIsHiddenAfterUpdate = false;\n    _this7.onInputChange(inputValue, { action: 'input-change' });\n    _this7.onMenuOpen();\n  };\n\n  this.onInputFocus = function (event) {\n    var _props18 = _this7.props,\n        isSearchable = _props18.isSearchable,\n        isMulti = _props18.isMulti;\n\n    if (_this7.props.onFocus) {\n      _this7.props.onFocus(event);\n    }\n    _this7.inputIsHiddenAfterUpdate = false;\n    _this7.announceAriaLiveContext({ event: 'input', context: { isSearchable: isSearchable, isMulti: isMulti } });\n    _this7.setState({\n      isFocused: true\n    });\n    if (_this7.openAfterFocus || _this7.props.openMenuOnFocus) {\n      _this7.openMenu('first');\n    }\n    _this7.openAfterFocus = false;\n  };\n\n  this.onInputBlur = function (event) {\n    if (_this7.props.onBlur) {\n      _this7.props.onBlur(event);\n    }\n    _this7.onInputChange('', { action: 'input-blur' });\n    _this7.onMenuClose();\n    _this7.setState({\n      focusedValue: null,\n      isFocused: false\n    });\n  };\n\n  this.onOptionHover = function (focusedOption) {\n    if (_this7.blockOptionHover || _this7.state.focusedOption === focusedOption) {\n      return;\n    }\n    _this7.setState({ focusedOption: focusedOption });\n  };\n\n  this.shouldHideSelectedOptions = function () {\n    var _props19 = _this7.props,\n        hideSelectedOptions = _props19.hideSelectedOptions,\n        isMulti = _props19.isMulti;\n\n    if (hideSelectedOptions === undefined) return isMulti;\n    return hideSelectedOptions;\n  };\n\n  this.onKeyDown = function (event) {\n    var _props20 = _this7.props,\n        isMulti = _props20.isMulti,\n        backspaceRemovesValue = _props20.backspaceRemovesValue,\n        escapeClearsValue = _props20.escapeClearsValue,\n        inputValue = _props20.inputValue,\n        isClearable = _props20.isClearable,\n        isDisabled = _props20.isDisabled,\n        menuIsOpen = _props20.menuIsOpen,\n        onKeyDown = _props20.onKeyDown,\n        tabSelectsValue = _props20.tabSelectsValue,\n        openMenuOnFocus = _props20.openMenuOnFocus;\n    var _state9 = _this7.state,\n        focusedOption = _state9.focusedOption,\n        focusedValue = _state9.focusedValue,\n        selectValue = _state9.selectValue;\n\n\n    if (isDisabled) return;\n\n    if (typeof onKeyDown === 'function') {\n      onKeyDown(event);\n      if (event.defaultPrevented) {\n        return;\n      }\n    }\n\n    // Block option hover events when the user has just pressed a key\n    _this7.blockOptionHover = true;\n    switch (event.key) {\n      case 'ArrowLeft':\n        if (!isMulti || inputValue) return;\n        _this7.focusValue('previous');\n        break;\n      case 'ArrowRight':\n        if (!isMulti || inputValue) return;\n        _this7.focusValue('next');\n        break;\n      case 'Backspace':\n        if (inputValue) return;\n        if (focusedValue) {\n          _this7.removeValue(focusedValue);\n        } else {\n          if (!backspaceRemovesValue) return;\n          _this7.popValue();\n        }\n        break;\n      case 'Tab':\n        if (event.shiftKey || !menuIsOpen || !tabSelectsValue || !focusedOption ||\n        // don't capture the event if the menu opens on focus and the focused\n        // option is already selected; it breaks the flow of navigation\n        openMenuOnFocus && _this7.isOptionSelected(focusedOption, selectValue)) {\n          return;\n        }\n        _this7.selectOption(focusedOption);\n        break;\n      case 'Enter':\n        if (menuIsOpen) {\n          if (!focusedOption) return;\n          _this7.selectOption(focusedOption);\n        } else {\n          _this7.focusOption('first');\n        }\n        break;\n      case 'Escape':\n        if (menuIsOpen) {\n          _this7.inputIsHiddenAfterUpdate = false;\n          _this7.onInputChange('', { action: 'menu-close' });\n          _this7.onMenuClose();\n        } else if (isClearable && escapeClearsValue) {\n          _this7.clearValue();\n        }\n        break;\n      case ' ':\n        // space\n        if (inputValue) {\n          return;\n        }\n        if (!menuIsOpen) {\n          _this7.openMenu('first');\n          break;\n        }\n        if (!focusedOption) return;\n        _this7.selectOption(focusedOption);\n        break;\n      case 'ArrowUp':\n        if (menuIsOpen) {\n          _this7.focusOption('up');\n        } else {\n          _this7.openMenu('last');\n        }\n        break;\n      case 'ArrowDown':\n        if (menuIsOpen) {\n          _this7.focusOption('down');\n        } else {\n          _this7.openMenu('first');\n        }\n        break;\n      case 'PageUp':\n        if (!menuIsOpen) return;\n        _this7.focusOption('pageup');\n        break;\n      case 'PageDown':\n        if (!menuIsOpen) return;\n        _this7.focusOption('pagedown');\n        break;\n      case 'Home':\n        if (!menuIsOpen) return;\n        _this7.focusOption('first');\n        break;\n      case 'End':\n        if (!menuIsOpen) return;\n        _this7.focusOption('last');\n        break;\n      default:\n        return;\n    }\n    event.preventDefault();\n  };\n};\n\nexports.default = Select;"]},"metadata":{},"sourceType":"script"}