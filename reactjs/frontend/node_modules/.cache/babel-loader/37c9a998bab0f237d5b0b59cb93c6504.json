{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nimport { Component, createElement, forwardRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport hoistStatics from \"hoist-non-react-statics\";\nvar SCRIPT_MAP = {}; // A counter used to generate a unique id for each component that uses the function\n\nvar idCount = 0;\nexport default function makeAsyncScript(getScriptURL, options) {\n  options = options || {};\n  return function wrapWithAsyncScript(WrappedComponent) {\n    var wrappedComponentName = WrappedComponent.displayName || WrappedComponent.name || \"Component\";\n\n    var AsyncScriptLoader = /*#__PURE__*/function (_Component) {\n      _inheritsLoose(AsyncScriptLoader, _Component);\n\n      function AsyncScriptLoader(props, context) {\n        var _this;\n\n        _this = _Component.call(this, props, context) || this;\n        _this.state = {};\n        _this.__scriptURL = \"\";\n        return _this;\n      }\n\n      var _proto = AsyncScriptLoader.prototype;\n\n      _proto.asyncScriptLoaderGetScriptLoaderID = function asyncScriptLoaderGetScriptLoaderID() {\n        if (!this.__scriptLoaderID) {\n          this.__scriptLoaderID = \"async-script-loader-\" + idCount++;\n        }\n\n        return this.__scriptLoaderID;\n      };\n\n      _proto.setupScriptURL = function setupScriptURL() {\n        this.__scriptURL = typeof getScriptURL === \"function\" ? getScriptURL() : getScriptURL;\n        return this.__scriptURL;\n      };\n\n      _proto.asyncScriptLoaderHandleLoad = function asyncScriptLoaderHandleLoad(state) {\n        var _this2 = this; // use reacts setState callback to fire props.asyncScriptOnLoad with new state/entry\n\n\n        this.setState(state, function () {\n          return _this2.props.asyncScriptOnLoad && _this2.props.asyncScriptOnLoad(_this2.state);\n        });\n      };\n\n      _proto.asyncScriptLoaderTriggerOnScriptLoaded = function asyncScriptLoaderTriggerOnScriptLoaded() {\n        var mapEntry = SCRIPT_MAP[this.__scriptURL];\n\n        if (!mapEntry || !mapEntry.loaded) {\n          throw new Error(\"Script is not loaded.\");\n        }\n\n        for (var obsKey in mapEntry.observers) {\n          mapEntry.observers[obsKey](mapEntry);\n        }\n\n        delete window[options.callbackName];\n      };\n\n      _proto.componentDidMount = function componentDidMount() {\n        var _this3 = this;\n\n        var scriptURL = this.setupScriptURL();\n        var key = this.asyncScriptLoaderGetScriptLoaderID();\n        var _options = options,\n            globalName = _options.globalName,\n            callbackName = _options.callbackName,\n            scriptId = _options.scriptId; // check if global object already attached to window\n\n        if (globalName && typeof window[globalName] !== \"undefined\") {\n          SCRIPT_MAP[scriptURL] = {\n            loaded: true,\n            observers: {}\n          };\n        } // check if script loading already\n\n\n        if (SCRIPT_MAP[scriptURL]) {\n          var entry = SCRIPT_MAP[scriptURL]; // if loaded or errored then \"finish\"\n\n          if (entry && (entry.loaded || entry.errored)) {\n            this.asyncScriptLoaderHandleLoad(entry);\n            return;\n          } // if still loading then callback to observer queue\n\n\n          entry.observers[key] = function (entry) {\n            return _this3.asyncScriptLoaderHandleLoad(entry);\n          };\n\n          return;\n        }\n        /*\n         * hasn't started loading\n         * start the \"magic\"\n         * setup script to load and observers\n         */\n\n\n        var observers = {};\n\n        observers[key] = function (entry) {\n          return _this3.asyncScriptLoaderHandleLoad(entry);\n        };\n\n        SCRIPT_MAP[scriptURL] = {\n          loaded: false,\n          observers: observers\n        };\n        var script = document.createElement(\"script\");\n        script.src = scriptURL;\n        script.async = true;\n\n        if (scriptId) {\n          script.id = scriptId;\n        }\n\n        var callObserverFuncAndRemoveObserver = function callObserverFuncAndRemoveObserver(func) {\n          if (SCRIPT_MAP[scriptURL]) {\n            var mapEntry = SCRIPT_MAP[scriptURL];\n            var observersMap = mapEntry.observers;\n\n            for (var obsKey in observersMap) {\n              if (func(observersMap[obsKey])) {\n                delete observersMap[obsKey];\n              }\n            }\n          }\n        };\n\n        if (callbackName && typeof window !== \"undefined\") {\n          window[callbackName] = function () {\n            return _this3.asyncScriptLoaderTriggerOnScriptLoaded();\n          };\n        }\n\n        script.onload = function () {\n          var mapEntry = SCRIPT_MAP[scriptURL];\n\n          if (mapEntry) {\n            mapEntry.loaded = true;\n            callObserverFuncAndRemoveObserver(function (observer) {\n              if (callbackName) {\n                return false;\n              }\n\n              observer(mapEntry);\n              return true;\n            });\n          }\n        };\n\n        script.onerror = function () {\n          var mapEntry = SCRIPT_MAP[scriptURL];\n\n          if (mapEntry) {\n            mapEntry.errored = true;\n            callObserverFuncAndRemoveObserver(function (observer) {\n              observer(mapEntry);\n              return true;\n            });\n          }\n        };\n\n        document.body.appendChild(script);\n      };\n\n      _proto.componentWillUnmount = function componentWillUnmount() {\n        // Remove tag script\n        var scriptURL = this.__scriptURL;\n\n        if (options.removeOnUnmount === true) {\n          var allScripts = document.getElementsByTagName(\"script\");\n\n          for (var i = 0; i < allScripts.length; i += 1) {\n            if (allScripts[i].src.indexOf(scriptURL) > -1) {\n              if (allScripts[i].parentNode) {\n                allScripts[i].parentNode.removeChild(allScripts[i]);\n              }\n            }\n          }\n        } // Clean the observer entry\n\n\n        var mapEntry = SCRIPT_MAP[scriptURL];\n\n        if (mapEntry) {\n          delete mapEntry.observers[this.asyncScriptLoaderGetScriptLoaderID()];\n\n          if (options.removeOnUnmount === true) {\n            delete SCRIPT_MAP[scriptURL];\n          }\n        }\n      };\n\n      _proto.render = function render() {\n        var globalName = options.globalName; // remove asyncScriptOnLoad from childProps\n\n        var _this$props = this.props,\n            asyncScriptOnLoad = _this$props.asyncScriptOnLoad,\n            forwardedRef = _this$props.forwardedRef,\n            childProps = _objectWithoutPropertiesLoose(_this$props, [\"asyncScriptOnLoad\", \"forwardedRef\"]); // eslint-disable-line no-unused-vars\n\n\n        if (globalName && typeof window !== \"undefined\") {\n          childProps[globalName] = typeof window[globalName] !== \"undefined\" ? window[globalName] : undefined;\n        }\n\n        childProps.ref = forwardedRef;\n        return createElement(WrappedComponent, childProps);\n      };\n\n      return AsyncScriptLoader;\n    }(Component); // Note the second param \"ref\" provided by React.forwardRef.\n    // We can pass it along to AsyncScriptLoader as a regular prop, e.g. \"forwardedRef\"\n    // And it can then be attached to the Component.\n\n\n    var ForwardedComponent = forwardRef(function (props, ref) {\n      return createElement(AsyncScriptLoader, _extends({}, props, {\n        forwardedRef: ref\n      }));\n    });\n    ForwardedComponent.displayName = \"AsyncScriptLoader(\" + wrappedComponentName + \")\";\n    ForwardedComponent.propTypes = {\n      asyncScriptOnLoad: PropTypes.func\n    };\n    return hoistStatics(ForwardedComponent, WrappedComponent);\n  };\n}","map":{"version":3,"sources":["/home/iiradia/EasyA/reactjs/node_modules/react-async-script/lib/esm/async-script-loader.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","_inheritsLoose","subClass","superClass","create","constructor","__proto__","Component","createElement","forwardRef","PropTypes","hoistStatics","SCRIPT_MAP","idCount","makeAsyncScript","getScriptURL","options","wrapWithAsyncScript","WrappedComponent","wrappedComponentName","displayName","name","AsyncScriptLoader","_Component","props","context","_this","state","__scriptURL","_proto","asyncScriptLoaderGetScriptLoaderID","__scriptLoaderID","setupScriptURL","asyncScriptLoaderHandleLoad","_this2","setState","asyncScriptOnLoad","asyncScriptLoaderTriggerOnScriptLoaded","mapEntry","loaded","Error","obsKey","observers","window","callbackName","componentDidMount","_this3","scriptURL","_options","globalName","scriptId","entry","errored","script","document","src","async","id","callObserverFuncAndRemoveObserver","func","observersMap","onload","observer","onerror","body","appendChild","componentWillUnmount","removeOnUnmount","allScripts","getElementsByTagName","parentNode","removeChild","render","_this$props","forwardedRef","childProps","undefined","ref","ForwardedComponent","propTypes"],"mappings":"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","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nimport { Component, createElement, forwardRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport hoistStatics from \"hoist-non-react-statics\";\nvar SCRIPT_MAP = {}; // A counter used to generate a unique id for each component that uses the function\n\nvar idCount = 0;\nexport default function makeAsyncScript(getScriptURL, options) {\n  options = options || {};\n  return function wrapWithAsyncScript(WrappedComponent) {\n    var wrappedComponentName = WrappedComponent.displayName || WrappedComponent.name || \"Component\";\n\n    var AsyncScriptLoader =\n    /*#__PURE__*/\n    function (_Component) {\n      _inheritsLoose(AsyncScriptLoader, _Component);\n\n      function AsyncScriptLoader(props, context) {\n        var _this;\n\n        _this = _Component.call(this, props, context) || this;\n        _this.state = {};\n        _this.__scriptURL = \"\";\n        return _this;\n      }\n\n      var _proto = AsyncScriptLoader.prototype;\n\n      _proto.asyncScriptLoaderGetScriptLoaderID = function asyncScriptLoaderGetScriptLoaderID() {\n        if (!this.__scriptLoaderID) {\n          this.__scriptLoaderID = \"async-script-loader-\" + idCount++;\n        }\n\n        return this.__scriptLoaderID;\n      };\n\n      _proto.setupScriptURL = function setupScriptURL() {\n        this.__scriptURL = typeof getScriptURL === \"function\" ? getScriptURL() : getScriptURL;\n        return this.__scriptURL;\n      };\n\n      _proto.asyncScriptLoaderHandleLoad = function asyncScriptLoaderHandleLoad(state) {\n        var _this2 = this;\n\n        // use reacts setState callback to fire props.asyncScriptOnLoad with new state/entry\n        this.setState(state, function () {\n          return _this2.props.asyncScriptOnLoad && _this2.props.asyncScriptOnLoad(_this2.state);\n        });\n      };\n\n      _proto.asyncScriptLoaderTriggerOnScriptLoaded = function asyncScriptLoaderTriggerOnScriptLoaded() {\n        var mapEntry = SCRIPT_MAP[this.__scriptURL];\n\n        if (!mapEntry || !mapEntry.loaded) {\n          throw new Error(\"Script is not loaded.\");\n        }\n\n        for (var obsKey in mapEntry.observers) {\n          mapEntry.observers[obsKey](mapEntry);\n        }\n\n        delete window[options.callbackName];\n      };\n\n      _proto.componentDidMount = function componentDidMount() {\n        var _this3 = this;\n\n        var scriptURL = this.setupScriptURL();\n        var key = this.asyncScriptLoaderGetScriptLoaderID();\n        var _options = options,\n            globalName = _options.globalName,\n            callbackName = _options.callbackName,\n            scriptId = _options.scriptId; // check if global object already attached to window\n\n        if (globalName && typeof window[globalName] !== \"undefined\") {\n          SCRIPT_MAP[scriptURL] = {\n            loaded: true,\n            observers: {}\n          };\n        } // check if script loading already\n\n\n        if (SCRIPT_MAP[scriptURL]) {\n          var entry = SCRIPT_MAP[scriptURL]; // if loaded or errored then \"finish\"\n\n          if (entry && (entry.loaded || entry.errored)) {\n            this.asyncScriptLoaderHandleLoad(entry);\n            return;\n          } // if still loading then callback to observer queue\n\n\n          entry.observers[key] = function (entry) {\n            return _this3.asyncScriptLoaderHandleLoad(entry);\n          };\n\n          return;\n        }\n        /*\n         * hasn't started loading\n         * start the \"magic\"\n         * setup script to load and observers\n         */\n\n\n        var observers = {};\n\n        observers[key] = function (entry) {\n          return _this3.asyncScriptLoaderHandleLoad(entry);\n        };\n\n        SCRIPT_MAP[scriptURL] = {\n          loaded: false,\n          observers: observers\n        };\n        var script = document.createElement(\"script\");\n        script.src = scriptURL;\n        script.async = true;\n\n        if (scriptId) {\n          script.id = scriptId;\n        }\n\n        var callObserverFuncAndRemoveObserver = function callObserverFuncAndRemoveObserver(func) {\n          if (SCRIPT_MAP[scriptURL]) {\n            var mapEntry = SCRIPT_MAP[scriptURL];\n            var observersMap = mapEntry.observers;\n\n            for (var obsKey in observersMap) {\n              if (func(observersMap[obsKey])) {\n                delete observersMap[obsKey];\n              }\n            }\n          }\n        };\n\n        if (callbackName && typeof window !== \"undefined\") {\n          window[callbackName] = function () {\n            return _this3.asyncScriptLoaderTriggerOnScriptLoaded();\n          };\n        }\n\n        script.onload = function () {\n          var mapEntry = SCRIPT_MAP[scriptURL];\n\n          if (mapEntry) {\n            mapEntry.loaded = true;\n            callObserverFuncAndRemoveObserver(function (observer) {\n              if (callbackName) {\n                return false;\n              }\n\n              observer(mapEntry);\n              return true;\n            });\n          }\n        };\n\n        script.onerror = function () {\n          var mapEntry = SCRIPT_MAP[scriptURL];\n\n          if (mapEntry) {\n            mapEntry.errored = true;\n            callObserverFuncAndRemoveObserver(function (observer) {\n              observer(mapEntry);\n              return true;\n            });\n          }\n        };\n\n        document.body.appendChild(script);\n      };\n\n      _proto.componentWillUnmount = function componentWillUnmount() {\n        // Remove tag script\n        var scriptURL = this.__scriptURL;\n\n        if (options.removeOnUnmount === true) {\n          var allScripts = document.getElementsByTagName(\"script\");\n\n          for (var i = 0; i < allScripts.length; i += 1) {\n            if (allScripts[i].src.indexOf(scriptURL) > -1) {\n              if (allScripts[i].parentNode) {\n                allScripts[i].parentNode.removeChild(allScripts[i]);\n              }\n            }\n          }\n        } // Clean the observer entry\n\n\n        var mapEntry = SCRIPT_MAP[scriptURL];\n\n        if (mapEntry) {\n          delete mapEntry.observers[this.asyncScriptLoaderGetScriptLoaderID()];\n\n          if (options.removeOnUnmount === true) {\n            delete SCRIPT_MAP[scriptURL];\n          }\n        }\n      };\n\n      _proto.render = function render() {\n        var globalName = options.globalName; // remove asyncScriptOnLoad from childProps\n\n        var _this$props = this.props,\n            asyncScriptOnLoad = _this$props.asyncScriptOnLoad,\n            forwardedRef = _this$props.forwardedRef,\n            childProps = _objectWithoutPropertiesLoose(_this$props, [\"asyncScriptOnLoad\", \"forwardedRef\"]); // eslint-disable-line no-unused-vars\n\n\n        if (globalName && typeof window !== \"undefined\") {\n          childProps[globalName] = typeof window[globalName] !== \"undefined\" ? window[globalName] : undefined;\n        }\n\n        childProps.ref = forwardedRef;\n        return createElement(WrappedComponent, childProps);\n      };\n\n      return AsyncScriptLoader;\n    }(Component); // Note the second param \"ref\" provided by React.forwardRef.\n    // We can pass it along to AsyncScriptLoader as a regular prop, e.g. \"forwardedRef\"\n    // And it can then be attached to the Component.\n\n\n    var ForwardedComponent = forwardRef(function (props, ref) {\n      return createElement(AsyncScriptLoader, _extends({}, props, {\n        forwardedRef: ref\n      }));\n    });\n    ForwardedComponent.displayName = \"AsyncScriptLoader(\" + wrappedComponentName + \")\";\n    ForwardedComponent.propTypes = {\n      asyncScriptOnLoad: PropTypes.func\n    };\n    return hoistStatics(ForwardedComponent, WrappedComponent);\n  };\n}"]},"metadata":{},"sourceType":"module"}