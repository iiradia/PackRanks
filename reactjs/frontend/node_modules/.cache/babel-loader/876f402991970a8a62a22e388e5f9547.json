{"ast":null,"code":"import * as React from \"react\";\nimport { useTransition, animated } from \"react-spring\";\nimport ReachAlert from \"@reach/alert\";\nimport Alert from \"./Alert\";\nimport { useTimeout } from \"./useTimeout\";\n\nconst getStyle = position => {\n  let style = {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\"\n  };\n\n  if (position.includes(\"right\")) {\n    style.alignItems = \"flex-end\";\n  } else if (position.includes(\"left\")) {\n    style.alignItems = \"flex-start\";\n  }\n\n  return style;\n};\n\nexport const Message = ({\n  id,\n  message,\n  position,\n  onRequestRemove,\n  requestClose = false,\n  duration = 30000\n}) => {\n  const container = React.useRef(null);\n  const [timeout, setTimeout] = React.useState(duration);\n  const [localShow, setLocalShow] = React.useState(true);\n  const isFromTop = position === \"top-left\" || position === \"top-right\" || position === \"top\";\n  useTimeout(close, timeout);\n  const animation = {\n    config: {\n      mass: 1,\n      tension: 185,\n      friction: 26\n    },\n    from: {\n      opacity: 1,\n      height: 0,\n      transform: `translateY(${isFromTop ? \"-100%\" : 0}) scale(1)`\n    },\n    enter: () => next => next({\n      opacity: 1,\n      height: container.current.getBoundingClientRect().height,\n      transform: `translateY(0) scale(1)`\n    }),\n    leave: {\n      opacity: 0,\n      height: 0,\n      transform: `translateY(0 scale(0.9)`\n    },\n    onRest\n  };\n  const transition = useTransition(localShow, null, animation);\n  const style = React.useMemo(() => getStyle(position), [position]);\n\n  function onMouseEnter() {\n    setTimeout(null);\n  }\n\n  function onMouseLeave() {\n    setTimeout(duration);\n  }\n\n  function onRest() {\n    if (!localShow) {\n      onRequestRemove();\n    }\n  }\n\n  function close() {\n    setLocalShow(false);\n  }\n\n  React.useEffect(() => {\n    if (requestClose) {\n      setLocalShow(false);\n    }\n  }, [requestClose]);\n\n  function renderMessage() {\n    if (typeof message === \"string\" || React.isValidElement(message)) {\n      return React.createElement(Alert, {\n        id: id,\n        title: message,\n        onClose: close\n      });\n    }\n\n    if (typeof message === \"function\") {\n      return message({\n        id,\n        onClose: close\n      });\n    }\n\n    return null;\n  }\n\n  return React.createElement(React.Fragment, null, transition.map(({\n    key,\n    item,\n    props\n  }) => item && React.createElement(animated.div, {\n    key: key,\n    className: \"Toaster__message\",\n    onMouseEnter: onMouseEnter,\n    onMouseLeave: onMouseLeave,\n    style: Object.assign({\n      opacity: props.opacity,\n      height: props.height\n    }, style)\n  }, React.createElement(animated.div, {\n    style: {\n      transform: props.transform,\n      pointerEvents: \"auto\"\n    },\n    ref: container,\n    className: \"Toaster__message-wrapper\"\n  }, React.createElement(ReachAlert, null, renderMessage())))));\n};","map":{"version":3,"sources":["/home/iiradia/EasyA/reactjs/frontend/node_modules/toasted-notes/lib/Message.js"],"names":["React","useTransition","animated","ReachAlert","Alert","useTimeout","getStyle","position","style","display","flexDirection","alignItems","includes","Message","id","message","onRequestRemove","requestClose","duration","container","useRef","timeout","setTimeout","useState","localShow","setLocalShow","isFromTop","close","animation","config","mass","tension","friction","from","opacity","height","transform","enter","next","current","getBoundingClientRect","leave","onRest","transition","useMemo","onMouseEnter","onMouseLeave","useEffect","renderMessage","isValidElement","createElement","title","onClose","Fragment","map","key","item","props","div","className","Object","assign","pointerEvents","ref"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { useTransition, animated } from \"react-spring\";\nimport ReachAlert from \"@reach/alert\";\nimport Alert from \"./Alert\";\nimport { useTimeout } from \"./useTimeout\";\nconst getStyle = (position) => {\n    let style = {\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\"\n    };\n    if (position.includes(\"right\")) {\n        style.alignItems = \"flex-end\";\n    }\n    else if (position.includes(\"left\")) {\n        style.alignItems = \"flex-start\";\n    }\n    return style;\n};\nexport const Message = ({ id, message, position, onRequestRemove, requestClose = false, duration = 30000 }) => {\n    const container = React.useRef(null);\n    const [timeout, setTimeout] = React.useState(duration);\n    const [localShow, setLocalShow] = React.useState(true);\n    const isFromTop = position === \"top-left\" || position === \"top-right\" || position === \"top\";\n    useTimeout(close, timeout);\n    const animation = {\n        config: { mass: 1, tension: 185, friction: 26 },\n        from: {\n            opacity: 1,\n            height: 0,\n            transform: `translateY(${isFromTop ? \"-100%\" : 0}) scale(1)`\n        },\n        enter: () => (next) => next({\n            opacity: 1,\n            height: container.current.getBoundingClientRect().height,\n            transform: `translateY(0) scale(1)`\n        }),\n        leave: {\n            opacity: 0,\n            height: 0,\n            transform: `translateY(0 scale(0.9)`\n        },\n        onRest\n    };\n    const transition = useTransition(localShow, null, animation);\n    const style = React.useMemo(() => getStyle(position), [position]);\n    function onMouseEnter() {\n        setTimeout(null);\n    }\n    function onMouseLeave() {\n        setTimeout(duration);\n    }\n    function onRest() {\n        if (!localShow) {\n            onRequestRemove();\n        }\n    }\n    function close() {\n        setLocalShow(false);\n    }\n    React.useEffect(() => {\n        if (requestClose) {\n            setLocalShow(false);\n        }\n    }, [requestClose]);\n    function renderMessage() {\n        if (typeof message === \"string\" || React.isValidElement(message)) {\n            return React.createElement(Alert, { id: id, title: message, onClose: close });\n        }\n        if (typeof message === \"function\") {\n            return message({\n                id,\n                onClose: close\n            });\n        }\n        return null;\n    }\n    return (React.createElement(React.Fragment, null, transition.map(({ key, item, props }) => item && (React.createElement(animated.div, { key: key, className: \"Toaster__message\", onMouseEnter: onMouseEnter, onMouseLeave: onMouseLeave, style: Object.assign({ opacity: props.opacity, height: props.height }, style) },\n        React.createElement(animated.div, { style: {\n                transform: props.transform,\n                pointerEvents: \"auto\"\n            }, ref: container, className: \"Toaster__message-wrapper\" },\n            React.createElement(ReachAlert, null, renderMessage())))))));\n};\n"]},"metadata":{},"sourceType":"module"}